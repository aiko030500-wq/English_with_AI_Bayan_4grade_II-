// === üåü ANIMATIONS.JS v2 ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è English with AI Bayan ===

// —Å–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
(function initAnimationContainer(){
  if(!document.getElementById("resultOverlay")){
    const box=document.createElement("div");
    box.id="resultOverlay";
    box.style.position="fixed";
    box.style.left="50%";
    box.style.top="50%";
    box.style.transform="translate(-50%,-50%)";
    box.style.fontSize="2rem";
    box.style.fontWeight="bold";
    box.style.zIndex="9999";
    box.style.textAlign="center";
    box.style.pointerEvents="none";
    document.body.appendChild(box);
  }
})();

// ‚úÖ / ‚ùå –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
function showResultAnimation(isCorrect, elementId) {
  const el = document.getElementById(elementId);
  const overlay = document.getElementById("resultOverlay");

  if (isCorrect) {
    if(el){ el.innerHTML="‚úÖ Correct! ‚≠ê"; }
    overlay.textContent = "‚úÖ";
    overlay.style.color = "limegreen";
    sparkleStars();
  } else {
    if(el){ el.innerHTML="‚ùå Try again!"; }
    overlay.textContent = "‚ùå";
    overlay.style.color = "red";
    navigator.vibrate?.(200);
  }

  overlay.style.opacity = "1";
  overlay.style.transition = "none";
  setTimeout(() => {
    overlay.style.transition = "opacity 1s ease-out";
    overlay.style.opacity = "0";
  }, 500);

  // –æ—á–∏—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫
  setTimeout(() => {
    overlay.textContent = "";
    if(el) el.innerHTML="";
  }, 1500);
}

// üåü –í—Å–ø—ã—à–∫–∞-–∑–≤–µ–∑–¥–∞ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
function sparkleStars(x = window.innerWidth / 2, y = window.innerHeight / 2) {
  const star = document.createElement("div");
  star.textContent = "‚≠ê";
  star.style.position = "fixed";
  star.style.left = `${x}px`;
  star.style.top = `${y}px`;
  star.style.fontSize = "2rem";
  star.style.opacity = "1";
  star.style.transition = "all 1.3s ease-out";
  star.style.pointerEvents = "none";
  star.style.zIndex = "9998";
  document.body.appendChild(star);
  setTimeout(() => {
    star.style.top = `${y - 100}px`;
    star.style.opacity = "0";
  }, 80);
  setTimeout(() => star.remove(), 1300);
}

// üó£Ô∏è –ì–æ–ª–æ—Å AI Bayan (–º—è–≥–∫–∏–π –±—Ä–∏—Ç–∞–Ω—Å–∫–∏–π)
function bayanSpeak(text) {
  if (!("speechSynthesis" in window)) {
    alert("Your browser does not support speech synthesis üòî");
    return;
  }
  const voices = speechSynthesis.getVoices();
  let voice =
    voices.find(v =>
      (v.name.toLowerCase().includes("female") || v.name.toLowerCase().includes("uk"))
      && v.lang.includes("en-GB")
    ) || voices.find(v => v.lang.includes("en"));
  const utter = new SpeechSynthesisUtterance(text);
  utter.voice = voice;
  utter.lang = "en-GB";
  utter.rate = 0.9;
  utter.pitch = 1.0;
  utter.volume = 1;
  speechSynthesis.speak(utter);
}

// ‚èπ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ—á–∏
function stopBayan() {
  window.speechSynthesis.cancel();
}
