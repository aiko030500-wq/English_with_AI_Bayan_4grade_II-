<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English with AI Bayan 4grade II (Online)</title>
<style>
  body {
    font-family: Verdana, sans-serif;
    background: linear-gradient(180deg,#fff6e5 0%,#f3e0b8 100%);
    margin: 0;
    color: #002b5c;
    text-align: center;
  }
  header {
    background: #003366;
    color: white;
    padding: 1rem;
    border-bottom: 5px solid gold;
  }
  main { padding: 1rem; }
  .btn {
    display: inline-block;
    margin: 6px;
    padding: 8px 14px;
    border-radius: 10px;
    border: none;
    background: #003366;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
  }
  .btn:hover { background: gold; color: #003366; }
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999;
  }
  .overlay-card {
    background: white;
    padding: 20px;
    border-radius: 16px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    border: 4px solid gold;
  }
  .overlay-card input {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }
  .topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap: 10px;
    max-width: 900px;
    margin: 0 auto 15px;
  }
  .topic-card {
    background: #ffffff;
    border-radius: 16px;
    padding: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.08);
    cursor: pointer;
    border: 2px solid #dde6ff;
  }
  .topic-card:hover { border-color: gold; transform: translateY(-1px); }
  #welcomeBox {
    background: linear-gradient(180deg, #fff9ec 0%, #f8e4ba 100%);
    border: 3px solid gold;
    border-radius: 20px;
    padding: 16px;
    width: 90%;
    max-width: 600px;
    margin: 16px auto 20px;
    box-shadow: 0 0 15px rgba(255,215,0,0.4);
  }
  #totalStars { font-weight: bold; color:#d48a00; }
</style>
</head>
<body>

<!-- LOGIN -->
<div class="overlay" id="loginOverlay">
  <div class="overlay-card">
    <h1>English with AI Bayan</h1>
    <input type="text" id="studentNameInput" placeholder="Enter your name">
    <input type="password" id="pinInput" placeholder="Enter PIN" maxlength="4">
    <button onclick="checkPin()">Enter</button>
  </div>
</div>

<header><h1>English with AI Bayan 4grade II</h1></header>

<main>
  <div id="welcomeBox" style="display:none;">
    <img src="logo.png" alt="AI Bayan Logo" style="width:120px;border-radius:50%;border:3px solid gold;">
    <h2 id="welcomeText"></h2>
    <p>You have <span id="totalStars">0</span> ‚≠ê total stars!</p>
  </div>

  <div id="studentMenu" style="display:none;">
    <div class="topics-grid">
      <div class="topic-card" onclick="openLesson(1)"><div class="topic-title">1. Let‚Äôs Have Fun!</div><div class="topic-emoji">üé®</div></div>
      <div class="topic-card" onclick="openLesson(2)"><div class="topic-title">2. Sports and Exercises</div><div class="topic-emoji">üèÉ‚Äç‚ôÄÔ∏è</div></div>
      <div class="topic-card" onclick="openLesson(3)"><div class="topic-title">3. Sports Around the World</div><div class="topic-emoji">üåç</div></div>
      <div class="topic-card" onclick="openLesson(4)"><div class="topic-title">4. Arts and Music</div><div class="topic-emoji">üéµ</div></div>
      <div class="topic-card" onclick="openLesson(5)"><div class="topic-title">5. Popular Team Sports</div><div class="topic-emoji">‚öΩ</div></div>
      <div class="topic-card" onclick="openLesson(6)"><div class="topic-title">6. Museum of Kazakh Musical Instruments</div><div class="topic-emoji">üéª</div></div>
      <div class="topic-card" onclick="openLesson(7)"><div class="topic-title">7. Children‚Äôs Rights & Responsibilities</div><div class="topic-emoji">üìú</div></div>
      <div class="topic-card" onclick="openLesson(8)"><div class="topic-title">8. Different Jobs</div><div class="topic-emoji">üß∞</div></div>
      <div class="topic-card" onclick="openLesson(9)"><div class="topic-title">9. Professions</div><div class="topic-emoji">üë©‚Äç‚öïÔ∏è</div></div>
      <div class="topic-card" onclick="openLesson(10)"><div class="topic-title">10. People at Work</div><div class="topic-emoji">üè¢</div></div>
      <div class="topic-card" onclick="openLesson(11)"><div class="topic-title">11. What Do You Do?</div><div class="topic-emoji">üí¨</div></div>
      <div class="topic-card" onclick="openLesson(12)"><div class="topic-title">12. You Can Help!</div><div class="topic-emoji">‚ù§Ô∏è</div></div>
      <div class="topic-card" onclick="openLesson(13)"><div class="topic-title">13. Final Challenge</div><div class="topic-emoji">üéØ</div></div>
      <div class="topic-card" onclick="openChatSection()"><div class="topic-title">üí¨ AI Bayan Chat ‚Äî Ask the Teacher</div><div class="topic-emoji">ü§ñ</div></div>
    </div>
  </div>

  <div id="teacherJournal" style="display:none;">
    <h2>üè´ Teacher Journal</h2>
    <table border="1" cellpadding="6" cellspacing="0" style="margin:auto;border-collapse:collapse;">
      <tr><th>Name</th><th>Lesson</th><th>Stars</th><th>Last Login</th></tr>
      <tbody id="journalTable"></tbody>
    </table>
    <p style="margin-top:10px;">Total: <b><span id="teacherTotal"></span> ‚≠ê</b></p>
    <button class="btn" onclick="logout()">Logout</button>
  </div>

  <!-- üí¨ CHAT -->
  <section id="chatSection" class="section" style="display:none;">
    <h2>üí¨ AI Bayan Teacher Chat</h2>
    <p>Ask about <b>grammar, vocabulary, translation</b>. You can write in English or Russian.</p>
    <div id="chatBox" style="max-height:300px;overflow-y:auto;border:1px solid #ccc;padding:10px;border-radius:10px;background:#fff;"></div>
    <textarea id="chatInput" placeholder="Ask your question here..." style="width:100%;border-radius:8px;margin-top:8px;"></textarea><br>
    <button class="btn" onclick="askBayan()">Ask</button>
    <button class="btn" onclick="clearChat()">Clear</button>
    <button class="btn" onclick="goMenu()">üè† Back to Menu</button>
  </section>
</main>

<script>
const allowedNames=[
"–ê–π–ª–∏–Ω2","–ê–π—Ç–∞—á2","–ñ–∞—Ö–∞–Ω–≥–∏—Ä2","–ê–ª—å–≤–∏2","–ù–∞—Ä–º–∏–Ω2","–ë–∞–ª–º–∞–Ω2","–î–∏–º–∞2",
"–ò–ª—å—è—Å2","–ö–∏—Ä–∏–ª–ª2","–ò—Ä–∞–¥–∞2","–®—ã“£“ì—ã—Å2","–°—É–ª—Ç–∞–Ω2","–ö–∏—Ä–∞2","–î–∞–º–∏—Ä2",
"–ê—Ä–∞–π2","–ë–∞—è–Ω2","–ñ—é—Ä–∏2","–ñ—é—Ä–∏3"
];

function checkPin(){
  const name=document.getElementById('studentNameInput').value.trim();
  const pin=document.getElementById('pinInput').value.trim();
  if(pin==='6856' && allowedNames.includes(name)){
    localStorage.setItem('studentName',name);
    const date=new Date().toLocaleString('ru-RU');
    localStorage.setItem(name+"_lastLogin",date);
    document.getElementById('loginOverlay').style.display='none';
    document.getElementById('studentMenu').style.display='block';
    document.getElementById('welcomeBox').style.display='block';
    updateStars();
  } else if(pin==='9995'){
    document.getElementById('loginOverlay').style.display='none';
    document.getElementById('teacherJournal').style.display='block';
    showJournal();
  } else {
    alert('‚ùå Access denied: wrong PIN or name not in list.');
  }
}

function updateStars(){
  const name=localStorage.getItem('studentName');
  let total=0;
  for(let i=1;i<=13;i++){
    total+=Number(localStorage.getItem(name+"_lesson"+i))||0;
  }
  total+=Number(localStorage.getItem(name+"_chatStars"))||0;
  document.getElementById('welcomeText').innerText="Hello, "+name+"!";
  document.getElementById('totalStars').innerText=total;
}

function showJournal(){
  const table=document.getElementById('journalTable');
  table.innerHTML="";
  let total=0;
  for(const name of allowedNames){
    for(let i=1;i<=13;i++){
      const stars=localStorage.getItem(name+"_lesson"+i)||0;
      const date=localStorage.getItem(name+"_lastLogin")||"-";
      total+=Number(stars);
      table.innerHTML+=`<tr><td>${name}</td><td>${i}</td><td>${stars}</td><td>${date}</td></tr>`;
    }
    const chatStars=localStorage.getItem(name+"_chatStars")||0;
    if(chatStars>0){
      const date=localStorage.getItem(name+"_lastLogin")||"-";
      total+=Number(chatStars);
      table.innerHTML+=`<tr><td>${name}</td><td>Chat</td><td>${chatStars}</td><td>${date}</td></tr>`;
    }
  }
  document.getElementById('teacherTotal').innerText=total;
}

function openLesson(n){ window.location.href="theme"+n+".html"; }
function logout(){ window.location.href="index.html"; }
function goMenu(){ window.location.href="index.html"; }

function openChatSection(){
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  document.getElementById('chatSection').style.display='block';
}

async function askBayan(){
  const q=document.getElementById('chatInput').value.trim();
  if(!q){ alert("Type your question first."); return; }
  const box=document.getElementById('chatBox');
  box.innerHTML+=`<p><b>You:</b> ${q}</p><p><i>AI Bayan is thinking...</i></p>`;
  let answer="";
  if(q.toLowerCase().includes("is playing")){
    answer="We say 'is playing' for actions happening now (Present Continuous).";
  } else if(q.toLowerCase().includes("fun")){
    answer="'Fun' means enjoyment. Example: Let's have fun!";
  } else answer="Good question! I'll explain it simply.";
  box.innerHTML=box.innerHTML.replace(`<p><i>AI Bayan is thinking...</i></p>`,"");
  box.innerHTML+=`<p><b>AI Bayan:</b> ${answer}</p>`;
  const utter=new SpeechSynthesisUtterance(answer);
  utter.lang="en-US"; utter.rate=0.9; speechSynthesis.speak(utter);
  const name=localStorage.getItem('studentName');
  let stars=Number(localStorage.getItem(name+"_chatStars"))||0;
  stars++;
  localStorage.setItem(name+"_chatStars",stars);
  updateStars();
  document.getElementById('chatInput').value="";
  box.scrollTop=box.scrollHeight;
}
function clearChat(){ document.getElementById('chatBox').innerHTML=""; }
</script>
 <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
</body>
</html>
 
