<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English with AI Bayan 4grade II</title>

<!-- üåü –î–ª—è PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#005B73">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="logo.png">

<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:Verdana,sans-serif;
  text-align:center;
  color:#002D72;
  background:#007D99;
}

/* üîπ HEADER */
header{
  background:#005B73;
  border-bottom:4px solid #FFD54F;
  box-shadow:0 4px 10px rgba(0,0,0,0.25);
  padding:12px 8px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
header img.logo{
  width:150px;
  height:150px;
  border-radius:50%;
  border:4px solid #FFD54F;
  background:white;
  object-fit:cover;
  object-position:center;
  box-shadow:0 0 8px rgba(255,213,79,0.9);
  margin-bottom:6px;
}
header h1{
  color:#FFD54F;
  font-size:1.8rem;
  margin:4px 0 0;
  text-shadow:0 0 12px rgba(255,255,180,0.8);
}
header h2{
  color:#FFF8C0;
  font-weight:bold;
  font-size:1rem;
  margin-bottom:6px;
}

/* üåü –õ–æ–≥–æ—Ç–∏–ø –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é */
#menuLogo{
  width:150px;
  height:150px;
  border-radius:50%;
  border:4px solid #FFD54F;
  background:white;
  object-fit:cover;
  object-position:center;
  box-shadow:0 0 8px rgba(255,213,79,0.9);
  margin:10px auto;
  display:block;
}

.overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.55);
  display:flex;align-items:center;justify-content:center;
  z-index:999;
}
.overlay-card{
  background:#fff;
  border:3px solid #FFD54F;
  padding:20px;
  border-radius:16px;
  box-shadow:0 0 15px rgba(0,0,0,0.35);
  width:90%;max-width:360px;
  color:#002D72;
}
.overlay-card input{
  width:100%;padding:8px;border-radius:8px;
  border:1px solid #ccc;margin:6px 0;font-size:1rem;
}
.btn{
  background:#005B73;color:#fff;border:none;
  border-radius:10px;padding:8px 14px;font-weight:bold;
  cursor:pointer;margin:6px;font-size:0.9rem;
}
.btn:hover{background:#FFD54F;color:#002D72;}
main{padding:12px 8px 90px;}
#mainMenu{display:none;}
.topics-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:14px;
  max-width:780px;
  margin:20px auto 15px;
}
.topic-btn{
  background:white;
  border:2px solid #004AAD;
  border-radius:16px;
  padding:12px;
  font-size:0.9rem;
  font-weight:bold;
  color:#002D72;
  cursor:pointer;
  transition:0.25s all;
  box-shadow:0 3px 6px rgba(0,0,0,0.15);
  height:70px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
}
.topic-btn:hover{
  background:#004AAD;
  color:#fff;
  transform:translateY(-3px);
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}
.topic-btn .num{font-weight:bold;}
.topic-btn .icon{font-size:1.3rem;}
#welcomeBox{
  margin:16px auto 0;
  background:white;
  border:2px solid #FFD54F;
  border-radius:10px;
  max-width:680px;
  padding:10px;
  color:#002D72;
  font-weight:bold;
  box-shadow:0 3px 6px rgba(0,0,0,0.1);
}
#extraBtns{margin-top:10px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
.extra-btn{
  background:white;
  border:2px solid #004AAD;
  border-radius:10px;
  padding:8px 16px;
  font-weight:bold;
  color:#002D72;
  cursor:pointer;
  box-shadow:0 3px 6px rgba(0,0,0,0.18);
}
.extra-btn:hover{background:#002D72;color:#fff;}

/* üåü –ö—Ä–∞—Å–∏–≤–∞—è –∫–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ */
.install-btn{
  position:fixed;
  bottom:20px;left:50%;
  transform:translateX(-50%);
  background:linear-gradient(90deg,#FFD54F,#FFF176);
  color:#003366;
  border:none;
  border-radius:999px;
  padding:14px 28px;
  font-weight:bold;
  font-size:1rem;
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
  cursor:pointer;
  z-index:999;
  display:none;
  animation:pop 0.6s ease;
}
.install-btn:hover{background:#FFE67A;}
@keyframes pop{
  0%{transform:translateX(-50%) scale(0.8);}
  100%{transform:translateX(-50%) scale(1);}
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="overlay" id="loginOverlay">
  <div class="overlay-card">
    <h2>English with AI Bayan</h2>
    <p>Enter your name and PIN:</p>
    <input type="text" id="nameInput" placeholder="Name">
    <input type="password" id="pinInput" placeholder="PIN" maxlength="4">
    <button class="btn" onclick="checkLogin()">Enter</button>
  </div>
</div>

<!-- HEADER -->
<header>
  <img src="logo.png" alt="AI Bayan logo" class="logo">
  <h1>ENGLISH WITH AI BAYAN</h1>
  <h2>4 GRADE II</h2>
</header>

<main>
  <div id="mainMenu">
    <!-- üîπ –õ–æ–≥–æ—Ç–∏–ø –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é -->
    <img src="logo.png" id="menuLogo" alt="AI Bayan Logo">
    <div id="welcomeBox">
      <div id="welcomeText">Hello, Student!</div>
      <div>Total stars in all lessons: <b><span id="totalStars">0</span> ‚≠ê</b></div>
    </div>

    <div class="topics-grid">
      <button class="topic-btn" onclick="openTheme(1)"><span class="num">1.</span><span class="icon">üé®</span>Let‚Äôs Have Fun!</button>
      <button class="topic-btn" onclick="openTheme(2)"><span class="num">2.</span><span class="icon">üèÉ‚Äç‚ôÇÔ∏è</span>Sports and Exercises</button>
      <button class="topic-btn" onclick="openTheme(3)"><span class="num">3.</span><span class="icon">üåç</span>Sports Around the World</button>
      <button class="topic-btn" onclick="openTheme(4)"><span class="num">4.</span><span class="icon">üéµ</span>Arts and Music</button>
      <button class="topic-btn" onclick="openTheme(5)"><span class="num">5.</span><span class="icon">‚öΩ</span>Popular Team Sports</button>
      <button class="topic-btn" onclick="openTheme(6)"><span class="num">6.</span><span class="icon">üéª</span>Museum of Kazakh Instruments</button>
      <button class="topic-btn" onclick="openTheme(7)"><span class="num">7.</span><span class="icon">üìú</span>Children‚Äôs Rights</button>
      <button class="topic-btn" onclick="openTheme(8)"><span class="num">8.</span><span class="icon">üß∞</span>Different Jobs</button>
      <button class="topic-btn" onclick="openTheme(9)"><span class="num">9.</span><span class="icon">üë©‚Äç‚öïÔ∏è</span>Professions</button>
      <button class="topic-btn" onclick="openTheme(10)"><span class="num">10.</span><span class="icon">üè¢</span>People at Work</button>
      <button class="topic-btn" onclick="openTheme(11)"><span class="num">11.</span><span class="icon">üí¨</span>What Do You Do?</button>
      <button class="topic-btn" onclick="openTheme(12)"><span class="num">12.</span><span class="icon">‚ù§Ô∏è</span>You Can Help!</button>
      <button class="topic-btn" onclick="openTheme(13)"><span class="num">13.</span><span class="icon">üéØ</span>Final Challenge</button>
    </div>

    <div id="extraBtns">
      <button class="extra-btn" onclick="openChat()">üí¨ AI Bayan Chat</button>
      <button class="extra-btn" onclick="openTeacherJournal()">üè´ Teacher‚Äôs Journal</button>
    </div>
  </div>
</main>

<!-- üåü –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ -->
<button id="installBtn" class="install-btn">üì≤ Install AI Bayan App</button>

<script>
// üåü –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è service worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('‚úÖ Service Worker –∞–∫—Ç–∏–≤–µ–Ω'))
    .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ SW:', err));
}

const allowedNames=[
  "Aytach2","Aylin2","Alvi2","Zhahangir2","Narmin2","Balman2",
  "Ilyas2","Dmitry2","Irada2","Shyngys2","Kiril2","Sultan2",
  "Kira2","Allahverdy2","Aziza2","Emir2","Monya2","Aeka2",
  "Bayan2","Arai2","Jury2","Jury1","Meyirim2"
];

function checkLogin(){
  const n=document.getElementById("nameInput").value.trim().toLowerCase();
  const p=document.getElementById("pinInput").value.trim();
  const a=allowedNames.map(x=>x.toLowerCase());
  if(a.includes(n)&&p==="6856"){
    document.getElementById("loginOverlay").style.display="none";
    document.getElementById("mainMenu").style.display="block";
    document.getElementById("welcomeText").innerText="Hello, "+n+"!";
  }else if(n==="teacher"&&p==="1402"){
    document.getElementById("loginOverlay").style.display="none";
    document.getElementById("mainMenu").style.display="block";
    document.getElementById("welcomeText").innerText="Hello, Teacher!";
  }else alert("‚ùå Wrong name or PIN");
}

function openTheme(n){window.location.href="theme"+n+".html";}
function openChat(){alert("Chat soon...");}
function openTeacherJournal(){alert("Journal soon...");}

/* üåü –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
let deferredPrompt = null;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "inline-flex";
});

installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) {
    alert("–û—Ç–∫—Ä–æ–π –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω¬ª.");
    return;
  }
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  console.log("–†–µ–∞–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", outcome);
  deferredPrompt = null;
  installBtn.style.display = "none";
});
</script>
</body>
</html>
