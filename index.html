<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English with AI Bayan 4grade II (Online)</title>
<style>
  body {
    font-family: Verdana, sans-serif;
    background: linear-gradient(180deg,#fff6e5 0%,#f3e0b8 100%);
    margin: 0;
    color: #002b5c;
    text-align: center;
  }
  header {
    background: #003366;
    color: white;
    padding: 1rem;
    border-bottom: 5px solid gold;
  }
  main { padding: 1rem; }

  .btn {
    display: inline-block;
    margin: 6px;
    padding: 8px 14px;
    border-radius: 10px;
    border: none;
    background: #003366;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    font-size: 0.9rem;
  }
  .btn:hover { background: gold; color: #003366; }

  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999;
  }
  .overlay-card {
    background: white;
    padding: 20px;
    border-radius: 16px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    border: 4px solid gold;
  }
  .overlay-card input {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }

  .logo-main {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid gold;
    margin-bottom: 6px;
  }

  .topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap: 10px;
    max-width: 900px;
    margin: 0 auto 15px;
  }
  .topic-card {
    background: #ffffff;
    border-radius: 16px;
    padding: 12px;
    box-shadow: 0 0 8px rgba(0,0,0,0.08);
    cursor: pointer;
    border: 2px solid #dde6ff;
    font-size: 0.95rem;
  }
  .topic-card:hover {
    border-color: gold;
    transform: translateY(-1px);
  }

  #welcomeBox {
    background: linear-gradient(180deg,#fff9ec 0%,#f8e4ba 100%);
    border: 3px solid gold;
    border-radius: 20px;
    padding: 16px;
    width: 90%;
    max-width: 600px;
    margin: 16px auto 20px;
    box-shadow: 0 0 15px rgba(255,215,0,0.4);
  }
  #welcomeBox h2 { margin: 4px 0; font-size: 1.4rem; }
  #totalStars { font-weight: bold; color:#d48a00; }

  .section { display: none; margin-top: 16px; }

  table { font-size: 0.85rem; border-collapse: collapse; margin: auto; }
  th, td { padding: 4px 6px; border: 1px solid #ccc; }

  /* Chat styles */
  #chatBox {
    max-height: 320px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 10px;
    background: #fff;
    text-align: left;
    font-size: 0.9rem;
  }
  .msg { margin: 6px 0; padding: 6px 10px; border-radius: 10px; line-height: 1.3; }
  .user { background:#e3f2fd; border-left:3px solid #1565c0; }
  .ai   { background:#fffde7; border-left:3px solid #f9a825; }
  .sys  { font-style: italic; color:#777; }
</style>
</head>
<body>

<!-- üîê LOGIN -->
<div class="overlay" id="loginOverlay">
  <div class="overlay-card">
    <h1>English with AI Bayan</h1>
    <input type="text" id="nameInput" placeholder="Enter your name">
    <input type="password" id="pinInput" placeholder="Enter PIN" maxlength="4">
    <button class="btn" onclick="checkLogin()">Enter</button>
  </div>
</div>

<header>
  <h1>English with AI Bayan 4grade II (ONLINE)</h1>
</header>

<main>
  <div id="welcomeBox" style="display:none;">
    <img src="logo.png" alt="AI Bayan Logo" class="logo-main">
    <h2 id="welcomeText"></h2>
    <p>You have <span id="totalStars">0</span> ‚≠ê total stars!</p>
  </div>

  <!-- üë©‚Äçüéì STUDENT MENU -->
  <div id="studentMenu" style="display:none;">
    <div class="topics-grid">
      <div class="topic-card" onclick="openLesson(1)">1. üé® Let‚Äôs Have Fun!</div>
      <div class="topic-card" onclick="openLesson(2)">2. üèÉ Sports and Exercises</div>
      <div class="topic-card" onclick="openLesson(3)">3. üåç Sports Around the World</div>
      <div class="topic-card" onclick="openLesson(4)">4. üéµ Arts and Music</div>
      <div class="topic-card" onclick="openLesson(5)">5. ‚öΩ Popular Team Sports</div>
      <div class="topic-card" onclick="openLesson(6)">6. üéª Museum of Kazakh Musical Instruments</div>
      <div class="topic-card" onclick="openLesson(7)">7. üìú Children‚Äôs Rights & Responsibilities</div>
      <div class="topic-card" onclick="openLesson(8)">8. üß∞ Different Jobs</div>
      <div class="topic-card" onclick="openLesson(9)">9. üë©‚Äç‚öïÔ∏è Professions</div>
      <div class="topic-card" onclick="openLesson(10)">10. üè¢ People at Work</div>
      <div class="topic-card" onclick="openLesson(11)">11. üí¨ What Do You Do?</div>
      <div class="topic-card" onclick="openLesson(12)">12. ‚ù§Ô∏è You Can Help!</div>
      <div class="topic-card" onclick="openLesson(13)">13. üéØ Final Challenge</div>
      <div class="topic-card" onclick="openChatSection()">üí¨ AI Bayan Chat ‚Äî Ask the Teacher ü§ñ</div>
    </div>
    <button class="btn" onclick="openTeacherJournal()">üè´ Teacher Journal</button>
  </div>

  <!-- üßæ TEACHER JOURNAL -->
  <div id="teacherJournal" class="section">
    <h2>üè´ Teacher Journal</h2>
    <table>
      <thead>
        <tr>
          <th>Student</th>
          <th>L1</th><th>L2</th><th>L3</th><th>L4</th><th>L5</th><th>L6</th>
          <th>L7</th><th>L8</th><th>L9</th><th>L10</th><th>L11</th><th>L12</th><th>L13</th>
          <th>Chat</th><th>Total ‚≠ê</th>
        </tr>
      </thead>
      <tbody id="journalBody"></tbody>
    </table>
    <button class="btn" onclick="logout()">Logout</button>
  </div>

  <!-- üí¨ CHAT SECTION -->
  <section id="chatSection" class="section" style="max-width:900px;margin:0 auto;">
    <h2>üí¨ AI Bayan ‚Äî Online Teacher Chat</h2>
    <p>
      Ask about <b>grammar, vocabulary, translation or homework</b>.<br>
      You can write in <b>English or Russian</b>, but AI Bayan will answer mostly in <b>simple English</b>.
    </p>

    <div id="chatBox"></div>

    <textarea id="chatInput" placeholder="Type your question here..." style="width:100%;border-radius:8px;margin-top:8px;min-height:60px;"></textarea><br>

    <button class="btn" onclick="askBayan()">Ask AI Bayan</button>
    <button class="btn" onclick="clearChat()">Clear</button>
    <button class="btn" onclick="goMenu()">üè† Back to Menu</button>
  </section>
</main>

<script>
/* ==== LOGIN / MENU / JOURNAL ==== */
const allowedNames = [
  "Aylin2","Aitach2","Zhakhangir2","Alvi2","Narmin2","Balman2",
  "Dima2","Ilyas2","Kirill2","Irada2","Shyngys2","Sultan2",
  "Kira2","Damir2","Arai2","Bayan2","Jury2","Jury3"
];

function checkLogin(){
  const name = document.getElementById("nameInput").value.trim();
  const pin  = document.getElementById("pinInput").value.trim();

  // üë©‚Äçüéì STUDENT
  if (allowedNames.includes(name) && pin === "6856") {
    localStorage.setItem("currentStudent", name);
    document.getElementById("loginOverlay").style.display = "none";
    document.getElementById("studentMenu").style.display   = "block";
    document.getElementById("welcomeBox").style.display    = "block";
    document.getElementById("welcomeText").innerText = "Hello, " + name + "!";
    updateStars();
  }
  // üë©‚Äçüè´ TEACHER
  else if (name.toLowerCase() === "teacher" && pin === "9995") {
    document.getElementById("loginOverlay").style.display = "none";
    document.getElementById("teacherJournal").style.display = "block";
    buildJournal();
  }
  else {
    alert("‚ùå Access denied. Check your name or PIN.");
  }
}

function updateStars(){
  const name = localStorage.getItem("currentStudent");
  if(!name) return;
  let total = 0;
  for(let i=1;i<=13;i++){
    total += Number(localStorage.getItem(name+"_lesson"+i+"Stars")) || 0;
  }
  total += Number(localStorage.getItem(name+"_chatStars")) || 0;
  document.getElementById("totalStars").innerText = total;
  localStorage.setItem(name+"_totalStars", total);
}

function buildJournal(){
  const body = document.getElementById("journalBody");
  body.innerHTML = "";
  allowedNames.forEach(name=>{
    let row = "<tr><td>"+name+"</td>";
    let total = 0;
    for(let i=1;i<=13;i++){
      const stars = Number(localStorage.getItem(name+"_lesson"+i+"Stars")) || 0;
      total += stars;
      row += "<td>"+stars+"</td>";
    }
    const chatStars = Number(localStorage.getItem(name+"_chatStars")) || 0;
    total += chatStars;
    row += "<td>"+chatStars+"</td><td>"+total+"</td></tr>";
    body.innerHTML += row;
  });
}

function openLesson(n){ window.location.href = "theme"+n+".html"; }

function openTeacherJournal(){
  document.getElementById("studentMenu").style.display = "none";
  document.getElementById("teacherJournal").style.display = "block";
  buildJournal();
}

function openChatSection(){
  document.getElementById("studentMenu").style.display = "none";
  document.getElementById("chatSection").style.display = "block";
}

function goMenu(){
  document.getElementById("chatSection").style.display = "none";
  document.getElementById("teacherJournal").style.display = "none";
  document.getElementById("studentMenu").style.display = "block";
  document.getElementById("welcomeBox").style.display = "block";
}

function logout(){
  localStorage.removeItem("currentStudent");
  window.location.href = "index.html";
}

/* ==== OFFLINE KNOWLEDGE BASE (13 TOPICS, –ü–û–î–†–û–ë–ù–û) ==== */
const knowledgeBase = [
  {
    topic: "1. Let‚Äôs Have Fun!",
    keywords: ["let's have fun", "lets have fun", "fun", "game", "games"],
    answer: `üé® Topic 1: Let‚Äôs Have Fun!

Explanation (English):
This topic is about free time and fun activities that children do: playing games, going to the park, drawing, watching cartoons and so on.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –ø—Ä–æ —Ç–æ, –∫–∞–∫ –¥–µ—Ç–∏ –ø—Ä–æ–≤–æ–¥—è—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è: –∏–≥—Ä–∞—é—Ç, –≥—É–ª—è—é—Ç –≤ –ø–∞—Ä–∫–µ, —Ä–∏—Å—É—é—Ç, —Å–º–æ—Ç—Ä—è—Ç –º—É–ª—å—Ç–∏–∫–∏ –∏ —Ç.–¥.

Key words / –°–ª–æ–≤–∞:
‚Ä¢ to play games ‚Äî –∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—ã  
‚Ä¢ to draw pictures ‚Äî —Ä–∏—Å–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏  
‚Ä¢ to watch cartoons ‚Äî —Å–º–æ—Ç—Ä–µ—Ç—å –º—É–ª—å—Ç–∏–∫–∏  
‚Ä¢ to ride a bike ‚Äî –∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ  
‚Ä¢ to go to the park ‚Äî —Ö–æ–¥–∏—Ç—å –≤ –ø–∞—Ä–∫  
‚Ä¢ funny ‚Äî —Å–º–µ—à–Ω–æ–π, –≤–µ—Å—ë–ª—ã–π  
‚Ä¢ exciting ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π  

Example sentences:
‚Ä¢ I usually play games with my friends after school.  
‚Ä¢ On Sundays we go to the park and ride our bikes.

Mini-quiz:
Translate and answer:
1) –ö–∞–∫ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏ ¬´—Å–º–æ—Ç—Ä–µ—Ç—å –º—É–ª—å—Ç–∏–∫–∏¬ª?  
2) Say a sentence: What do you do for fun?`
  },
  {
    topic: "2. Sports and Exercises",
    keywords: ["sports and exercises", "sport and exercise", "sports", "exercises", "exercise"],
    answer: `üèÉ Topic 2: Sports and Exercises

Explanation (English):
This topic is about doing sports and keeping healthy. We talk about kinds of sport and simple exercises.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Å–ø–æ—Ä—Ç–µ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è—Ö –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è. –ú—ã –Ω–∞–∑—ã–≤–∞–µ–º –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞ –∏ –ø—Ä–æ—Å—Ç—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.

Key words:
‚Ä¢ to run ‚Äî –±–µ–≥–∞—Ç—å  
‚Ä¢ to jump ‚Äî –ø—Ä—ã–≥–∞—Ç—å  
‚Ä¢ to swim ‚Äî –ø–ª–∞–≤–∞—Ç—å  
‚Ä¢ to play football ‚Äî –∏–≥—Ä–∞—Ç—å –≤ —Ñ—É—Ç–±–æ–ª  
‚Ä¢ to do exercises ‚Äî –¥–µ–ª–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è  
‚Ä¢ strong ‚Äî —Å–∏–ª—å–Ω—ã–π  
‚Ä¢ healthy ‚Äî –∑–¥–æ—Ä–æ–≤—ã–π  

Example sentences:
‚Ä¢ I do morning exercises every day.  
‚Ä¢ My favourite sport is football because I play it with my friends.

Mini-quiz:
1) How do you say ¬´–¥–µ–ª–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è¬ª in English?  
2) Answer in English: What sport do you like?`
  },
  {
    topic: "3. Sports Around the World",
    keywords: ["sports around the world", "world sports", "around the world"],
    answer: `üåç Topic 3: Sports Around the World

Explanation (English):
This topic shows that people in different countries like different sports. Some sports are popular everywhere.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ª—é–±—è—Ç —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã –≤–æ –≤—Å—ë–º –º–∏—Ä–µ.

Key words:
‚Ä¢ countries ‚Äî —Å—Ç—Ä–∞–Ω—ã  
‚Ä¢ popular ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π  
‚Ä¢ football ‚Äî —Ñ—É—Ç–±–æ–ª  
‚Ä¢ basketball ‚Äî –±–∞—Å–∫–µ—Ç–±–æ–ª  
‚Ä¢ tennis ‚Äî —Ç–µ–Ω–Ω–∏—Å  
‚Ä¢ national sport ‚Äî –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ —Å–ø–æ—Ä—Ç–∞  

Example sentences:
‚Ä¢ Football is a very popular sport around the world.  
‚Ä¢ In some countries ice hockey is a national sport.

Mini-quiz:
1) Name two sports that are popular in many countries.  
2) –°–∫–∞–∂–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏: ¬´–•–æ–∫–∫–µ–π ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤–∏–¥ —Å–ø–æ—Ä—Ç–∞¬ª.`
  },
  {
    topic: "4. Arts and Music",
    keywords: ["arts and music", "art and music", "music", "art", "arts"],
    answer: `üéµ Topic 4: Arts and Music

Explanation (English):
This topic is about different kinds of art: music, painting, dancing, singing and playing musical instruments.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–∞—Ö –∏—Å–∫—É—Å—Å—Ç–≤–∞: –º—É–∑—ã–∫–∞, —Ä–∏—Å–æ–≤–∞–Ω–∏–µ, —Ç–∞–Ω—Ü—ã, –ø–µ–Ω–∏–µ –∏ –∏–≥—Ä–∞ –Ω–∞ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö.

Key words:
‚Ä¢ art ‚Äî –∏—Å–∫—É—Å—Å—Ç–≤–æ  
‚Ä¢ music ‚Äî –º—É–∑—ã–∫–∞  
‚Ä¢ to sing ‚Äî –ø–µ—Ç—å  
‚Ä¢ to dance ‚Äî —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å  
‚Ä¢ to paint ‚Äî —Ä–∏—Å–æ–≤–∞—Ç—å –∫—Ä–∞—Å–∫–∞–º–∏  
‚Ä¢ a song ‚Äî –ø–µ—Å–Ω—è  
‚Ä¢ a musician ‚Äî –º—É–∑—ã–∫–∞–Ω—Ç  

Example sentences:
‚Ä¢ I like listening to music when I do my homework.  
‚Ä¢ My sister can sing very well and she wants to be a musician.

Mini-quiz:
1) –ö–∞–∫ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏ ¬´—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å¬ª?  
2) Say a sentence: What kind of music do you like?`
  },
  {
    topic: "5. Popular Team Sports",
    keywords: ["popular team sports", "team sports", "team sport"],
    answer: `‚öΩ Topic 5: Popular Team Sports

Explanation (English):
This topic is about sports where people play in teams: football, basketball, volleyball and others.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –≤–∏–¥–∞—Ö —Å–ø–æ—Ä—Ç–∞, –≥–¥–µ –ª—é–¥–∏ –∏–≥—Ä–∞—é—Ç –≤–º–µ—Å—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ: —Ñ—É—Ç–±–æ–ª, –±–∞—Å–∫–µ—Ç–±–æ–ª, –≤–æ–ª–µ–π–±–æ–ª –∏ –¥—Ä.

Key words:
‚Ä¢ a team ‚Äî –∫–æ–º–∞–Ω–¥–∞  
‚Ä¢ a team-mate ‚Äî —Ç–æ–≤–∞—Ä–∏—â –ø–æ –∫–æ–º–∞–Ω–¥–µ  
‚Ä¢ to win ‚Äî –≤—ã–∏–≥—Ä—ã–≤–∞—Ç—å  
‚Ä¢ to lose ‚Äî –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç—å  
‚Ä¢ a match ‚Äî –º–∞—Ç—á  
‚Ä¢ a player ‚Äî –∏–≥—Ä–æ–∫  
‚Ä¢ to pass the ball ‚Äî –ø–∞—Å–æ–≤–∞—Ç—å –º—è—á  

Example sentences:
‚Ä¢ In football there are eleven players in a team.  
‚Ä¢ We play volleyball at school and our team often wins.

Mini-quiz:
1) Translate: ¬´–Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–±–µ–¥–∏–ª–∞¬ª.  
2) Answer: Do you prefer team sports or individual sports? Why?`
  },
  {
    topic: "6. Museum of Kazakh Musical Instruments",
    keywords: ["museum of kazakh musical instruments", "kazakh musical instruments", "kazakh instruments", "dombra", "kobyz"],
    answer: `üéª Topic 6: Museum of Kazakh Musical Instruments

Explanation (English):
This topic is about traditional Kazakh musical instruments and a museum where we can see them.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ –∫–∞–∑–∞—Ö—Å–∫–∏—Ö –Ω–∞—Ä–æ–¥–Ω—ã—Ö –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –∏ –º—É–∑–µ–µ, –≥–¥–µ –∏—Ö –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å.

Key words:
‚Ä¢ a museum ‚Äî –º—É–∑–µ–π  
‚Ä¢ Kazakh ‚Äî –∫–∞–∑–∞—Ö—Å–∫–∏–π  
‚Ä¢ musical instruments ‚Äî –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã  
‚Ä¢ dombra ‚Äî –¥–æ–º–±—Ä–∞  
‚Ä¢ kobyz ‚Äî –∫–æ–±—ã–∑  
‚Ä¢ to play the dombra ‚Äî –∏–≥—Ä–∞—Ç—å –Ω–∞ –¥–æ–º–±—Ä–µ  

Example sentences:
‚Ä¢ In the museum we can see many Kazakh musical instruments.  
‚Ä¢ My grandfather can play the dombra very well.

Mini-quiz:
1) How do you say ¬´–º—É–∑–µ–π¬ª in English?  
2) –ù–∞–∑–æ–≤–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏ –æ–¥–∏–Ω –∫–∞–∑–∞—Ö—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.`
  },
  {
    topic: "7. Children‚Äôs Rights & Responsibilities",
    keywords: ["children's rights", "children rights", "rights and responsibilities", "responsibilities", "rights"],
    answer: `üìú Topic 7: Children‚Äôs Rights & Responsibilities

Explanation (English):
This topic is about what children are allowed to have and do (rights) and what they must do (responsibilities).

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Ç–æ–º, —á—Ç–æ –¥–µ—Ç—è–º –ø–æ–ª–æ–∂–µ–Ω–æ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ (–ø—Ä–∞–≤–∞), –∏ –æ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –æ–±—è–∑–∞–Ω—ã –¥–µ–ª–∞—Ç—å (–æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏).

Key words:
‚Ä¢ rights ‚Äî –ø—Ä–∞–≤–∞  
‚Ä¢ responsibilities ‚Äî –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏  
‚Ä¢ to go to school ‚Äî —Ö–æ–¥–∏—Ç—å –≤ —à–∫–æ–ª—É  
‚Ä¢ to have a family ‚Äî –∏–º–µ—Ç—å —Å–µ–º—å—é  
‚Ä¢ to be safe ‚Äî –±—ã—Ç—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏  
‚Ä¢ to help at home ‚Äî –ø–æ–º–æ–≥–∞—Ç—å –¥–æ–º–∞  

Example sentences:
‚Ä¢ Children have the right to go to school.  
‚Ä¢ Children have the responsibility to respect their parents and teachers.

Mini-quiz:
1) Translate: ¬´–¥–µ—Ç–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –Ω–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ¬ª.  
2) Name one right and one responsibility of children.`
  },
  {
    topic: "8. Different Jobs",
    keywords: ["different jobs", "jobs", "job", "work people do"],
    answer: `üè¥‚Äç‚ò†Ô∏è Topic 8: Different Jobs

Explanation (English):
This topic is about many different jobs that people do: doctor, driver, cook, farmer and so on.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏—è—Ö –ª—é–¥–µ–π: –≤—Ä–∞—á, –≤–æ–¥–∏—Ç–µ–ª—å, –ø–æ–≤–∞—Ä, —Ñ–µ—Ä–º–µ—Ä –∏ –¥—Ä.

Key words:
‚Ä¢ a doctor ‚Äî –≤—Ä–∞—á  
‚Ä¢ a driver ‚Äî –≤–æ–¥–∏—Ç–µ–ª—å  
‚Ä¢ a cook ‚Äî –ø–æ–≤–∞—Ä  
‚Ä¢ a farmer ‚Äî —Ñ–µ—Ä–º–µ—Ä  
‚Ä¢ a nurse ‚Äî –º–µ–¥—Å–µ—Å—Ç—Ä–∞  
‚Ä¢ a firefighter ‚Äî –ø–æ–∂–∞—Ä–Ω—ã–π  

Example sentences:
‚Ä¢ A doctor helps sick people.  
‚Ä¢ A driver drives a bus or a car.

Mini-quiz:
1) –°–∫–∞–∂–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏: ¬´–ú–æ–π –æ—Ç–µ—Ü ‚Äî –≤–æ–¥–∏—Ç–µ–ª—å¬ª.  
2) Name three jobs in English.`
  },
  {
    topic: "9. Professions",
    keywords: ["professions", "profession", "jobs and professions"],
    answer: `üë©‚Äçüè´ Topic 9: Professions

Explanation (English):
This topic is close to ‚ÄúDifferent Jobs‚Äù, but here we often talk about what children want to be in the future.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–≠—Ç–∞ —Ç–µ–º–∞ –ø–æ—Ö–æ–∂–∞ –Ω–∞ ¬´Different Jobs¬ª, –Ω–æ –∑–¥–µ—Å—å –º—ã –±–æ–ª—å—à–µ –≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–µ–º –¥–µ—Ç–∏ —Ö–æ—Ç—è—Ç —Å—Ç–∞—Ç—å –≤ –±—É–¥—É—â–µ–º.

Key words:
‚Ä¢ a teacher ‚Äî —É—á–∏—Ç–µ–ª—å  
‚Ä¢ an engineer ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä  
‚Ä¢ a singer ‚Äî –ø–µ–≤–µ—Ü / –ø–µ–≤–∏—Ü–∞  
‚Ä¢ an artist ‚Äî —Ö—É–¥–æ–∂–Ω–∏–∫  
‚Ä¢ a pilot ‚Äî –ø–∏–ª–æ—Ç  
‚Ä¢ a vet (veterinarian) ‚Äî –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä  

Useful phrases:
‚Ä¢ I want to be a ‚Ä¶ ‚Äî –Ø —Ö–æ—á—É —Å—Ç–∞—Ç—å ‚Ä¶  
‚Ä¢ It is an interesting profession. ‚Äî –≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è.

Example sentences:
‚Ä¢ I want to be a teacher because I like children.  
‚Ä¢ His dream is to be a pilot and travel around the world.

Mini-quiz:
1) Answer in English: What do you want to be?  
2) Translate: ¬´–û–Ω–∞ —Ö–æ—á–µ—Ç —Å—Ç–∞—Ç—å –≤—Ä–∞—á–æ–º¬ª.`
  },
  {
    topic: "10. People at Work",
    keywords: ["people at work", "at work", "working people"],
    answer: `üè¢ Topic 10: People at Work

Explanation (English):
This topic is about where people work and what they do at their workplace.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Ç–æ–º, –≥–¥–µ –ª—é–¥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç –Ω–∞ —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ.

Key words:
‚Ä¢ a workplace ‚Äî —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ  
‚Ä¢ an office ‚Äî –æ—Ñ–∏—Å  
‚Ä¢ a factory ‚Äî –∑–∞–≤–æ–¥  
‚Ä¢ a hospital ‚Äî –±–æ–ª—å–Ω–∏—Ü–∞  
‚Ä¢ a school ‚Äî —à–∫–æ–ª–∞  
‚Ä¢ to work hard ‚Äî —É—Å–µ—Ä–¥–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å  

Example sentences:
‚Ä¢ My mum works at a hospital. She is a nurse.  
‚Ä¢ People at the factory work with machines.

Mini-quiz:
1) –°–∫–∞–∂–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏: ¬´–ú–æ–π –ø–∞–ø–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–∏—Å–µ¬ª.  
2) Answer: Where does a teacher work?`
  },
  {
    topic: "11. What Do You Do?",
    keywords: ["what do you do", "what do you do?", "do you do", "introduce job"],
    answer: `üí¨ Topic 11: What Do You Do?

Explanation (English):
This topic teaches how to ask and answer questions about jobs and daily duties.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ —É—á–∏—Ç, –∫–∞–∫ –∑–∞–¥–∞–≤–∞—Ç—å –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—è—Ö.

Key patterns:
‚Ä¢ What do you do? ‚Äî –ö–µ–º —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å? / –ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å?  
‚Ä¢ I am a teacher. ‚Äî –Ø —É—á–∏—Ç–µ–ª—å.  
‚Ä¢ What does he do? ‚Äî –ö–µ–º –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç?  
‚Ä¢ He is a driver. ‚Äî –û–Ω –≤–æ–¥–∏—Ç–µ–ª—å.  

Example sentences:
‚Ä¢ ‚Äî What do your parents do?  
  ‚Äî My father is a driver and my mother is a nurse.  

Mini-quiz:
1) Translate: ¬´–ß–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ç–≤–æ—è –º–∞–º–∞?¬ª  
2) Answer in English: What does a doctor do?`
  },
  {
    topic: "12. You Can Help!",
    keywords: ["you can help", "help", "helping", "help at home"],
    answer: `‚ù§Ô∏è Topic 12: You Can Help!

Explanation (English):
This topic is about how children can help their family, school and other people.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ –æ —Ç–æ–º, –∫–∞–∫ –¥–µ—Ç–∏ –º–æ–≥—É—Ç –ø–æ–º–æ–≥–∞—Ç—å —Å–µ–º—å–µ, —à–∫–æ–ª–µ –∏ –¥—Ä—É–≥–∏–º –ª—é–¥—è–º.

Key words:
‚Ä¢ to help ‚Äî –ø–æ–º–æ–≥–∞—Ç—å  
‚Ä¢ to clean the room ‚Äî —É–±–∏—Ä–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É  
‚Ä¢ to wash the dishes ‚Äî –º—ã—Ç—å –ø–æ—Å—É–¥—É  
‚Ä¢ to take care of pets ‚Äî –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –ø–∏—Ç–æ–º—Ü–∞—Ö  
‚Ä¢ to help younger children ‚Äî –ø–æ–º–æ–≥–∞—Ç—å –º–ª–∞–¥—à–∏–º –¥–µ—Ç—è–º  

Example sentences:
‚Ä¢ I can help my parents: I clean my room and wash the dishes.  
‚Ä¢ At school we help our teacher to keep the classroom clean.

Mini-quiz:
1) Name two ways you can help at home.  
2) –°–∫–∞–∂–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏: ¬´–Ø –ø–æ–º–æ–≥–∞—é –º–∞–º–µ –ø–æ –¥–æ–º—É¬ª.`
  },
  {
    topic: "13. Final Challenge",
    keywords: ["final challenge", "challenge", "review", "revision"],
    answer: `üéØ Topic 13: Final Challenge

Explanation (English):
This topic is a big review of all the previous topics: sports, music, jobs, rights, helping others and so on.

–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–ø–æ-—Ä—É—Å—Å–∫–∏):
–¢–µ–º–∞ ‚Äî —ç—Ç–æ –±–æ–ª—å—à–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ç–µ–º: —Å–ø–æ—Ä—Ç, –º—É–∑—ã–∫–∞, –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –ø—Ä–∞–≤–∞ –¥–µ—Ç–µ–π, –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º –∏ —Ç.–¥.

What you should be able to do:
‚Ä¢ talk about your free time and favourite sports;  
‚Ä¢ name different jobs and say what people do;  
‚Ä¢ speak about children‚Äôs rights and responsibilities;  
‚Ä¢ say how you can help at home and at school.

Example task:
‚Ä¢ Write 5‚Äì6 sentences about yourself:  
  your hobbies, favourite sport, your future profession and how you help your family.

Mini-quiz:
1) Answer in English: What is your favourite topic from this unit and why?  
2) Make 3 sentences that use different topics (sport + job + help).`
  }
];

function getOfflineAnswer(question){
  const q = question.toLowerCase();

  for(const item of knowledgeBase){
    if(item.keywords.some(k => q.includes(k))){
      return `${item.answer}\n\n(Offline AI Bayan ‚úÖ ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ —Ç–µ–º–µ: ${item.topic})`;
    }
  }

  return `AI Bayan (offline):

I am working in offline mode now and I know 13 topics:
1) Let‚Äôs Have Fun!
2) Sports and Exercises
3) Sports Around the World
4) Arts and Music
5) Popular Team Sports
6) Museum of Kazakh Musical Instruments
7) Children‚Äôs Rights & Responsibilities
8) Different Jobs
9) Professions
10) People at Work
11) What Do You Do?
12) You Can Help!
13) Final Challenge

Try to write the name or number of a topic, for example:
"Explain Sports and Exercises"
"Tell me about Different Jobs"
"Final Challenge".`;
}

/* ==== ONLINE CHAT + OFFLINE –§–û–õ–ë–≠–ö ==== */
async function askBayan(){
  const input = document.getElementById('chatInput');
  const box   = document.getElementById('chatBox');
  const question = input.value.trim();

  if(!question){
    alert("Type your question first.");
    return;
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞
  box.innerHTML += `<div class="msg user"><b>You:</b> ${escapeHtml(question)}</div>`;
  box.innerHTML += `<p id="thinking" class="sys">AI Bayan is thinking...</p>`;
  box.scrollTop = box.scrollHeight;
  input.value = "";

  // ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ ‚Äî —Å—Ä–∞–∑—É –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º
  if (typeof navigator !== "undefined" && navigator && navigator.onLine === false) {
    const thinking = document.getElementById("thinking");
    if(thinking) thinking.remove();
    const offlineAnswer = getOfflineAnswer(question);
    box.innerHTML += `<div class="msg ai"><b>AI Bayan:</b> ${escapeHtml(offlineAnswer)}</div>`;
    box.scrollTop = box.scrollHeight;
    addChatStar();
    return;
  }

  try {
    // ONLINE: –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ backend (Render)
    const response = await fetch("https://ai-bayan-backend.onrender.com/ask", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        prompt: question,
        system: "You are AI Bayan, a kind English teacher for 4th grade. " +
                "Answer mostly in simple English. If the student writes in Russian, " +
                "you may add a short Russian explanation, but keep key phrases in English."
      })
    });

    const data = await response.json();
    const thinking = document.getElementById("thinking");
    if(thinking) thinking.remove();

    // –ï—Å–ª–∏ backend –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É ‚Äî —É—Ö–æ–¥–∏–º –≤ –æ—Ñ–ª–∞–π–Ω-–æ—Ç–≤–µ—Ç
    if(data.error){
      const offlineAnswer = getOfflineAnswer(question);
      box.innerHTML += `<div class="msg ai"><b>AI Bayan:</b> ${escapeHtml(offlineAnswer)}</div>`;
      box.scrollTop = box.scrollHeight;
      addChatStar();
    } else {
      const answer =
        data.reply ||
        (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) ||
        "No reply";

      box.innerHTML += `<div class="msg ai"><b>AI Bayan:</b> ${escapeHtml(answer)}</div>`;
      box.scrollTop = box.scrollHeight;
      addChatStar();
    }
  } catch(err){
    // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ fetch ‚Üí –æ—Ñ–ª–∞–π–Ω-–æ—Ç–≤–µ—Ç
    const thinking = document.getElementById("thinking");
    if(thinking) thinking.remove();
    const offlineAnswer = getOfflineAnswer(question);
    const box   = document.getElementById('chatBox');
    box.innerHTML += `<div class="msg ai"><b>AI Bayan:</b> ${escapeHtml(offlineAnswer)}</div>`;
    box.scrollTop = box.scrollHeight;
    addChatStar();
    console.error(err);
  }
}

function addChatStar(){
  const name = localStorage.getItem("currentStudent");
  if(name){
    let chatStars = Number(localStorage.getItem(name+"_chatStars")) || 0;
    chatStars++;
    localStorage.setItem(name+"_chatStars", chatStars);
    updateStars();
  }
}

function clearChat(){
  document.getElementById('chatBox').innerHTML = "";
}

function escapeHtml(str){
  if(!str) return "";
  return str
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;");
}

// –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
window.addEventListener("load", () => {
  const box = document.getElementById("chatBox");
  if(box){
    box.innerHTML = `<div class="msg ai"><b>AI Bayan:</b> Hi! I am AI Bayan ü§ñ
I can help you with grammar, vocabulary and your 13 topics.
Ask your question in English or Russian.</div>`;
  }
});
</script>
</body>
</html>
