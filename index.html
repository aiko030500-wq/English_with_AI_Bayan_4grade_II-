<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Bayan â€” Online Chat</title>
<style>
body {
  font-family: Verdana, sans-serif;
  background: linear-gradient(180deg,#eaf3ff 0%,#f8fbff 100%);
  color:#002b5c;
  text-align:center;
  margin:0;
}
header {
  background:#003366;
  color:white;
  padding:1rem;
  border-bottom:5px solid gold;
  font-size:1.2rem;
}
#chat {
  width:90%;
  max-width:520px;
  height:360px;
  margin:15px auto;
  padding:10px;
  background:white;
  border-radius:12px;
  border:2px solid gold;
  overflow-y:auto;
  text-align:left;
}
.msg {
  margin:6px 0;
  padding:8px 12px;
  border-radius:10px;
  line-height:1.3;
}
.user { background:#e3f2fd; border-left:3px solid #1565c0; }
.ai { background:#fff8dc; border-left:3px solid gold; }
#inputBox {
  width:90%;
  max-width:520px;
  height:70px;
  margin-top:10px;
  border-radius:10px;
  border:2px solid #003366;
  padding:8px;
  font-family:inherit;
  font-size:1rem;
}
button {
  margin:8px 5px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
#sendBtn { background:#003366; color:white; }
#clearBtn { background:gold; color:#002b5c; }
</style>
</head>
<body>
<header>ðŸ¤– AI Bayan â€” Online Chat</header>

<div id="chat">
  <div class="msg ai">AI Bayan: Hello! Iâ€™m your online English helper. Ask me about grammar, vocabulary or translation ðŸ’¬</div>
</div>

<textarea id="inputBox" placeholder="Type your question..."></textarea><br>
<button id="sendBtn">Send</button>
<button id="clearBtn">Clear</button>

<script>
const OPENAI_API_KEY = "sk-Ð’Ð¡Ð¢ÐÐ’Ð¬_Ð¡Ð’ÐžÐ™_ÐšÐ›Ð®Ð§_Ð¡Ð®Ð”Ð";

async function aiAnswer(prompt) {
  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + OPENAI_API_KEY
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [
        { role: "system", content: "You are AI Bayan, a friendly English teacher for kids. Always answer clearly and kindly." },
        { role: "user", content: prompt }
      ]
    })
  });
  const data = await res.json();
  return data.choices?.[0]?.message?.content || "âš ï¸ No response.";
}

const chat = document.getElementById("chat");
const inputBox = document.getElementById("inputBox");
const sendBtn = document.getElementById("sendBtn");
const clearBtn = document.getElementById("clearBtn");

function addMessage(text, who) {
  const div = document.createElement("div");
  div.className = "msg " + who;
  div.textContent = (who === "user" ? "You: " : "AI Bayan: ") + text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

sendBtn.onclick = async () => {
  const q = inputBox.value.trim();
  if (!q) return;
  addMessage(q, "user");
  inputBox.value = "";

  const loading = document.createElement("div");
  loading.className = "msg ai";
  loading.textContent = "AI Bayan is thinking...";
  chat.appendChild(loading);
  chat.scrollTop = chat.scrollHeight;

  try {
    const answer = await aiAnswer(q);
    loading.remove();
    addMessage(answer, "ai");
  } catch (err) {
    loading.remove();
    addMessage("âŒ Connection error. Check your API key or internet.", "ai");
  }
};

clearBtn.onclick = () => chat.innerHTML = "";
</script>
</body>
</html>
