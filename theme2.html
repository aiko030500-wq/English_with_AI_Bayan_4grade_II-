<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme 2 ‚Äî Sports and Exercises</title>
  <style>
    body {
      font-family: Verdana, sans-serif;
      background: linear-gradient(180deg,#e5f7ff 0%,#cce6ff 100%);
      margin: 0;
      color: #002b5c;
      text-align: center;
    }
    header {
      background: linear-gradient(90deg,#003366,#0066aa);
      color: white;
      padding: 0.6rem 1rem;
      border-bottom: 5px solid #00c3ff;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      width: 55px; height: 55px;
      border-radius: 50%;
      border: 3px solid #00c3ff;
      object-fit: cover;
      background: white;
    }
    h2 {color:#003366;}
    section {
      background: white;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 15px;
      max-width: 800px;
      margin: 15px auto;
      text-align: left;
      line-height: 1.5;
      font-size: 0.95rem;
    }
    h3 {
      background: #003366;
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 1rem;
    }
    .btn {
      display:inline-block;
      margin:6px;
      padding:8px 14px;
      border:none;
      border-radius:10px;
      background:#003366;
      color:white;
      font-weight:bold;
      cursor:pointer;
      font-size:0.9rem;
    }
    .btn:hover {background:#00c3ff; color:#003366;}
    textarea {
      width:100%;
      border-radius:10px;
      border:1px solid #ccc;
      padding:6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    input[type="text"] {
      width:100%;
      max-width:380px;
      border-radius:8px;
      border:1px solid #ccc;
      padding:4px 6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    select {
      border-radius:8px;
      padding:2px 4px;
      font-size:0.9rem;
    }
  </style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:10px;">
    <img src="logo.png" class="logo" alt="AI Bayan logo">
    <div>
      <h1 style="margin:0;font-size:1rem;">Theme 2 ‚Äî Sports and Exercises</h1>
      <p style="margin:0;color:#c9f5ff;">English with AI Bayan (by book)</p>
    </div>
  </div>
</header>

<main>
  <h2>üèÉ Sports and Exercises</h2>
  <p style="font-style:italic;">Children playing, moving and having fun</p>
  <p id="lessonStarsLine"><b>You have 0 ‚≠ê in this lesson.</b></p>

  <!-- ========== VOCABULARY (sports words + park) ========== -->
  <section>
    <h3>üß† VOCABULARY ‚Äî Sports and games</h3>

    <p><b>AI Bayan –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –†–µ–±—ë–Ω–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥.</b></p>

    <!-- Q1 -->
    <p>1) AI Bayan:
      <button class="btn" onclick="speakVocab('I like playing football.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v1" value="1"> –Ø –ª—é–±–ª—é –∏–≥—Ä–∞—Ç—å –≤ —Ñ—É—Ç–±–æ–ª.</label><br>
    <label><input type="radio" name="v1" value="0"> –Ø –ª—é–±–ª—é —Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º—ã.</label><br>
    <label><input type="radio" name="v1" value="0"> –Ø –ª—é–±–ª—é –∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ.</label><br>

    <!-- Q2 -->
    <p>2) AI Bayan:
      <button class="btn" onclick="speakVocab('She plays volleyball after school.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v2" value="0"> –û–Ω–∞ –∏–≥—Ä–∞–µ—Ç –≤ —Ç–µ–Ω–Ω–∏—Å –ø–æ—Å–ª–µ —à–∫–æ–ª—ã.</label><br>
    <label><input type="radio" name="v2" value="1"> –û–Ω–∞ –∏–≥—Ä–∞–µ—Ç –≤ –≤–æ–ª–µ–π–±–æ–ª –ø–æ—Å–ª–µ —à–∫–æ–ª—ã.</label><br>
    <label><input type="radio" name="v2" value="0"> –û–Ω–∞ –ø–ª–∞–≤–∞–µ—Ç –ø–æ—Å–ª–µ —à–∫–æ–ª—ã.</label><br>

    <!-- Q3 -->
    <p>3) AI Bayan:
      <button class="btn" onclick="speakVocab('We go swimming on Saturdays.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v3" value="0"> –ú—ã –∏–≥—Ä–∞–µ–º –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª –ø–æ —Å—É–±–±–æ—Ç–∞–º.</label><br>
    <label><input type="radio" name="v3" value="1"> –ú—ã —Ö–æ–¥–∏–º –ø–ª–∞–≤–∞—Ç—å –ø–æ —Å—É–±–±–æ—Ç–∞–º.</label><br>
    <label><input type="radio" name="v3" value="0"> –ú—ã –±–µ–≥–∞–µ–º –ø–æ —Å—É–±–±–æ—Ç–∞–º.</label><br>

    <!-- Q4 -->
    <p>4) AI Bayan:
      <button class="btn" onclick="speakVocab('They are playing hide-and-seek in the park.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v4" value="1"> –û–Ω–∏ –∏–≥—Ä–∞—é—Ç –≤ –ø—Ä—è—Ç–∫–∏ –≤ –ø–∞—Ä–∫–µ.</label><br>
    <label><input type="radio" name="v4" value="0"> –û–Ω–∏ –∫–∞—Ç–∞—é—Ç—Å—è –Ω–∞ –∫–æ–Ω—å–∫–∞—Ö –Ω–∞ –∫–∞—Ç–∫–µ.</label><br>
    <label><input type="radio" name="v4" value="0"> –û–Ω–∏ –∏–≥—Ä–∞—é—Ç –≤ —Ç–µ–Ω–Ω–∏—Å –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ.</label><br>

    <!-- Q5 -->
    <p>5) AI Bayan:
      <button class="btn" onclick="speakVocab('Aliya is flying a kite.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v5" value="0"> –ê–ª–∏—è –ª–æ–≤–∏—Ç —Ä—ã–±—É.</label><br>
    <label><input type="radio" name="v5" value="1"> –ê–ª–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–æ–∑–¥—É—à–Ω–æ–≥–æ –∑–º–µ—è.</label><br>
    <label><input type="radio" name="v5" value="0"> –ê–ª–∏—è –∏–≥—Ä–∞–µ—Ç –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª.</label><br>

    <!-- Q6 -->
    <p>6) AI Bayan:
      <button class="btn" onclick="speakVocab('The boys are playing basketball in the gym.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v6" value="1"> –ú–∞–ª—å—á–∏–∫–∏ –∏–≥—Ä–∞—é—Ç –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ.</label><br>
    <label><input type="radio" name="v6" value="0"> –ú–∞–ª—å—á–∏–∫–∏ –∏–≥—Ä–∞—é—Ç –≤ —Ç–µ–Ω–Ω–∏—Å –Ω–∞ —É–ª–∏—Ü–µ.</label><br>
    <label><input type="radio" name="v6" value="0"> –ú–∞–ª—å—á–∏–∫–∏ –ø–ª–∞–≤–∞—é—Ç –≤ –±–∞—Å—Å–µ–π–Ω–µ.</label><br>

    <button class="btn" onclick="checkVocab()">Check ‚úÖ</button>
    <div id="vocabStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== GRAMMAR (Present Continuous + pronouns) ========== -->
  <section>
    <h3>üìò GRAMMAR ‚Äî Present Continuous & Pronouns</h3>

    <p><b>1. Present Continuous (what is happening now):</b></p>
    <p>
      <b>am / is / are + verb-ing</b><br>
      I am running. / She is playing tennis. / They are swimming.
    </p>

    <p><b>Choose the correct form:</b></p>
    <p>1) He ___ playing tennis.</p>
    <label><input type="radio" name="q1" value="is"> is</label><br>
    <label><input type="radio" name="q1" value="are"> are</label><br>

    <p>2) They ___ playing football in the park.</p>
    <label><input type="radio" name="q2" value="is"> is</label><br>
    <label><input type="radio" name="q2" value="are"> are</label><br>

    <p>3) I ___ going running in the morning.</p>
    <label><input type="radio" name="q3" value="am"> am</label><br>
    <label><input type="radio" name="q3" value="is"> is</label><br>

    <hr>

    <p><b>2. Subject / Object / Possessive Pronouns:</b></p>
    <p>
      <b>Subject pronouns:</b> I, you, he, she, it, we, they<br>
      <b>Object pronouns:</b> me, you, him, her, it, us, them<br>
      <b>Possessive adjectives:</b> my, your, his, her, our, their<br>
      <b>Possessive pronouns:</b> mine, yours, his, hers, ours, theirs
    </p>

    <p><b>Choose the correct pronoun:</b></p>

    <p>4) This is my brother. I play basketball with ___.</p>
    <label><input type="radio" name="q4" value="him"> him</label><br>
    <label><input type="radio" name="q4" value="he"> he</label><br>

    <p>5) We have a new volleyball. It is ___ volleyball.</p>
    <label><input type="radio" name="q5" value="our"> our</label><br>
    <label><input type="radio" name="q5" value="ours"> ours</label><br>

    <p>6) These skates are ___. (They belong to me.)</p>
    <label><input type="radio" name="q6" value="my"> my</label><br>
    <label><input type="radio" name="q6" value="mine"> mine</label><br>

    <p>7) Aidos and Ali are friends. This ball is ___. (belongs to them)</p>
    <label><input type="radio" name="q7" value="their"> their</label><br>
    <label><input type="radio" name="q7" value="theirs"> theirs</label><br>

    <button class="btn" onclick="checkGrammar()">Check ‚úÖ</button>
    <div id="grammarStars" style="font-size:1.1rem;margin-top:8px;"></div>

    <p><b>3. Write your own sentence:</b> (practice)</p>
    <p>Example: This is my racket. It is mine.</p>
    <input id="writeGrammar" type="text" placeholder="Type your sentence here...">
  </section>

  <!-- ========== LISTENING (Best Friends / children & sports) ========== -->
  <section>
    <h3>üéß LISTENING ‚Äî Friends and sports</h3>

    <p><b>1. Listen to AI Bayan:</b></p>
    <button class="btn" onclick="bayanListening()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:8px;font-size:0.9rem;color:#444;">
      (Teacher note: —Ç–µ–∫—Å—Ç –ø–æ –º–æ—Ç–∏–≤–∞–º Student‚Äôs Book ‚Äî –¥–µ—Ç–∏ –∏ –∏—Ö –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞.)
    </p>

    <p><b>2. True or False?</b></p>

    <p>1) Alex plays ice hockey.</p>
    <select id="t1">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <p>2) Lee plays basketball.</p>
    <select id="t2">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <p>3) Oraz goes ice skating at the weekend.</p>
    <select id="t3">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <button class="btn" onclick="checkListening()">Check ‚úÖ</button>
    <div id="listenStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== READING (–∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–æ —Å–ø–æ—Ä—Ç) ========== -->
  <section>
    <h3>üìñ READING ‚Äî Our favourite sports</h3>

    <p><b>1. Read or listen:</b></p>
    <button class="btn" onclick="bayanReading()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <div style="margin-top:10px; background:#e9fff4; border-radius:10px; padding:10px;">
      <p>
        My friends and I love sports.  
        I like playing football and volleyball.  
        My friend Dana likes playing tennis and table tennis.  
        My brother enjoys going swimming and running in the park.  
        At the weekend, we all play games together and have fun.
      </p>
    </div>

    <p><b>2. Answer the questions:</b></p>
    <ol>
      <li>What sports do I like playing?<br>
        <input id="r1" type="text" placeholder="Your answer..."></li><br>
      <li>What sports does Dana like?<br>
        <input id="r2" type="text" placeholder="Your answer..."></li><br>
      <li>What does my brother enjoy doing?<br>
        <input id="r3" type="text" placeholder="Your answer..."></li>
    </ol>

    <button class="btn" onclick="checkReading()">Check ‚úÖ</button>
    <div id="readStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== SPEAKING (—Å–ø—Ä–æ—Å–∏/–æ—Ç–≤–µ—Ç—å –ø—Ä–æ —Å–ø–æ—Ä—Ç) ========== -->
  <section>
    <h3>üó£Ô∏è SPEAKING ‚Äî Talk about sports</h3>

    <p><b>1. Listen to questions:</b></p>
    <button class="btn" onclick="bayanSpeaking()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:8px;"><b>Questions:</b></p>
    <ul>
      <li>What sports do you like playing?</li>
      <li>Do you like running or swimming?</li>
      <li>Who do you play sports with?</li>
    </ul>

    <p><b>2. Answer into the microphone:</b></p>
    <button class="btn" onclick="startSpeak()">üéô Start recording</button>
    <button class="btn" onclick="stopSpeak()">‚èπ Stop</button>

    <div id="speakStars" style="font-size:1.1rem;margin-top:10px;"></div>
  </section>

  <!-- ========== WRITING (–ø–µ—Ä–µ–≤–æ–¥ + –¥–∏–∫—Ç–∞–Ω—Ç –ø–æ —Ç–µ–º–µ) ========== -->
  <section>
    <h3>‚úçÔ∏è WRITING ‚Äî Translation & Dictation</h3>

    <p><b>A. Translate into English:</b></p>
    <p>1) –û–Ω–∏ –∏–≥—Ä–∞—é—Ç –≤ –≤–æ–ª–µ–π–±–æ–ª –ø–æ—Å–ª–µ —à–∫–æ–ª—ã.</p>
    <textarea id="w1" rows="2" placeholder="Your translation..."></textarea>

    <p>2) –ú–æ–π –±—Ä–∞—Ç –ª—é–±–∏—Ç –ø–ª–∞–≤–∞—Ç—å –∏ –±–µ–≥–∞—Ç—å.</p>
    <textarea id="w2" rows="2" placeholder="Your translation..."></textarea>

    <p>3) –≠—Ç–æ –Ω–∞—à–∞ —Ä–∞–∫–µ—Ç–∫–∞. –û–Ω–∞ –Ω–∞—à–∞.</p>
    <textarea id="w3" rows="2" placeholder="Your translation..."></textarea>

    <button class="btn" onclick="checkWritingTranslate()">Check translation ‚úÖ</button>
    <div id="writeTransStars" style="font-size:1.1rem;margin-top:6px;"></div>

    <hr>

    <p><b>B. Dictation by AI Bayan:</b></p>
    <p>Listen and write the text. Pay attention to punctuation.</p>
    <button class="btn" onclick="bayanWords()">‚ñ∂ Words</button>
    <button class="btn" onclick="bayanDictation()">‚ñ∂ Text</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:6px;font-size:0.85rem;color:#444;">
      (Short dictation text with sports and pronouns.)
    </p>

    <textarea id="writeBox" rows="5" placeholder="Write the text here..."></textarea><br>
    <button class="btn" onclick="checkDictation()">Check dictation ‚úÖ</button>
    <div id="dictStars" style="font-size:1.1rem;margin-top:6px;"></div>
  </section>

  <!-- ========== LESSON RESULT ========== -->
  <section style="text-align:center;margin-top:25px;">
    <h3>üéØ Lesson Complete!</h3>
    <p>You have earned <b><span id="finalStars">0</span> ‚≠ê</b> in this lesson.</p>

    <button class="btn" onclick="finishLesson()">Save & Show Result ‚úÖ</button>

    <div id="finalMessage" style="margin-top:10px;font-size:1.1rem;color:#003366;"></div>

    <div style="margin-top:18px;">
      <button class="btn" onclick="goBack()">‚¨Ö Back</button>
      <button class="btn" onclick="goMenu()">üè† Main Menu</button>
      <button class="btn" onclick="goNext()">Next ‚û°Ô∏è</button>
    </div>
  </section>

  <p style="font-size:0.8rem;color:#444;margin-top:10px;text-align:center;">
    Created by Bayan team
  </p>
</main>

<script>
  // –û–ë–©–ò–ô –°–ß–Å–¢ –ó–í–Å–ó–î (–±–µ–∑ –ª–∏–º–∏—Ç–∞: –∫–∞–∂–¥—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç = +1)
  let totalStars = 0;
  function addStar() {
    totalStars++;
    updateStarsText();
  }
  function updateStarsText(){
    document.getElementById('lessonStarsLine').innerText =
      "You have " + totalStars + " ‚≠ê in this lesson.";
    const fs = document.getElementById('finalStars');
    if(fs) fs.innerText = totalStars;
  }

  // –§–õ–ê–ì–ò, —á—Ç–æ–±—ã –∑–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ—Ç–≤–µ—Ç –∑–≤–µ–∑–¥—É –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
  const scored = {
    v1:false, v2:false, v3:false, v4:false, v5:false, v6:false,
    g1:false, g2:false, g3:false, g4:false, g5:false, g6:false, g7:false,
    l1:false, l2:false, l3:false,
    r1:false, r2:false, r3:false,
    w1:false, w2:false, w3:false,
    dict:false
  };

  // ---------- TTS (AI Bayan voice) ----------
  function speakBayanText(text){
    if(!('speechSynthesis' in window)){
      alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–∑–≤—É—á–∫—É üòî");
      return;
    }
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    utter.rate = 0.9;
    utter.pitch = 1.05;
    utter.volume = 1;
    const voices = speechSynthesis.getVoices();
    const femaleEn = voices.find(v => v.lang.includes("en") && v.name.toLowerCase().includes("female"));
    if(femaleEn) utter.voice = femaleEn;
    speechSynthesis.speak(utter);
  }

  function stopBayan(){
    window.speechSynthesis.cancel();
  }

  // ---------- VOCABULARY ----------
  function speakVocab(text){
    speakBayanText(text);
  }

  function checkVocab(){
    let starsHere = 0;

    const q1 = document.querySelector('input[name="v1"]:checked');
    if(q1 && q1.value === "1" && !scored.v1){
      scored.v1 = true; addStar(); starsHere++;
    }
    const q2 = document.querySelector('input[name="v2"]:checked');
    if(q2 && q2.value === "1" && !scored.v2){
      scored.v2 = true; addStar(); starsHere++;
    }
    const q3 = document.querySelector('input[name="v3"]:checked');
    if(q3 && q3.value === "1" && !scored.v3){
      scored.v3 = true; addStar(); starsHere++;
    }
    const q4 = document.querySelector('input[name="v4"]:checked');
    if(q4 && q4.value === "1" && !scored.v4){
      scored.v4 = true; addStar(); starsHere++;
    }
    const q5 = document.querySelector('input[name="v5"]:checked');
    if(q5 && q5.value === "1" && !scored.v5){
      scored.v5 = true; addStar(); starsHere++;
    }
    const q6 = document.querySelector('input[name="v6"]:checked');
    if(q6 && q6.value === "1" && !scored.v6){
      scored.v6 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('vocabStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " vocabulary stars!";
    } else {
      box.innerHTML = "No new stars. Check answers or you already got them.";
    }
  }

  // ---------- GRAMMAR ----------
  function checkGrammar(){
    let starsHere = 0;

    const q1 = document.querySelector('input[name="q1"]:checked');
    if(q1 && q1.value === "is" && !scored.g1){
      scored.g1 = true; addStar(); starsHere++;
    }
    const q2 = document.querySelector('input[name="q2"]:checked');
    if(q2 && q2.value === "are" && !scored.g2){
      scored.g2 = true; addStar(); starsHere++;
    }
    const q3 = document.querySelector('input[name="q3"]:checked');
    if(q3 && q3.value === "am" && !scored.g3){
      scored.g3 = true; addStar(); starsHere++;
    }

    const q4 = document.querySelector('input[name="q4"]:checked');
    if(q4 && q4.value === "him" && !scored.g4){
      scored.g4 = true; addStar(); starsHere++;
    }
    const q5 = document.querySelector('input[name="q5"]:checked');
    if(q5 && q5.value === "our" && !scored.g5){
      scored.g5 = true; addStar(); starsHere++;
    }
    const q6 = document.querySelector('input[name="q6"]:checked');
    if(q6 && q6.value === "mine" && !scored.g6){
      scored.g6 = true; addStar(); starsHere++;
    }
    const q7 = document.querySelector('input[name="q7"]:checked');
    if(q7 && q7.value === "theirs" && !scored.g7){
      scored.g7 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('grammarStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " grammar stars!";
    } else {
      box.innerHTML = "No new stars. Check again or you already got them.";
    }
  }

  // ---------- LISTENING ----------
  function bayanListening(){
    const t = "Alex plays ice hockey. He trains at the ice rink. " +
              "Lee plays table tennis with his friends. " +
              "Oraz goes ice skating at the weekend. They all love sports.";
    speakBayanText(t);
  }

  function checkListening(){
    let starsHere = 0;

    if(document.getElementById('t1').value === 'True' && !scored.l1){
      scored.l1 = true; addStar(); starsHere++;
    }
    if(document.getElementById('t2').value === 'False' && !scored.l2){
      scored.l2 = true; addStar(); starsHere++;
    }
    if(document.getElementById('t3').value === 'True' && !scored.l3){
      scored.l3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('listenStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " listening stars!";
    } else {
      box.innerHTML = "No new stars. Check your answers.";
    }
  }

  // ---------- READING ----------
  function bayanReading(){
    const t =
      "My friends and I love sports. " +
      "I like playing football and volleyball. " +
      "My friend Dana likes playing tennis and table tennis. " +
      "My brother enjoys going swimming and running in the park. " +
      "At the weekend, we all play games together and have fun.";
    speakBayanText(t);
  }

  function checkReading(){
    let starsHere = 0;
    const a1 = document.getElementById('r1').value.toLowerCase();
    const a2 = document.getElementById('r2').value.toLowerCase();
    const a3 = document.getElementById('r3').value.toLowerCase();

    if(!scored.r1 && (a1.includes("football") || a1.includes("volleyball"))){
      scored.r1 = true; addStar(); starsHere++;
    }
    if(!scored.r2 && (a2.includes("tennis") || a2.includes("table tennis"))){
      scored.r2 = true; addStar(); starsHere++;
    }
    if(!scored.r3 && (a3.includes("swimming") || a3.includes("running"))){
      scored.r3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('readStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " reading stars!";
    } else {
      box.innerHTML = "No new stars. Check answers or you already got them.";
    }
  }

  // ---------- SPEAKING ----------
  let recognition;
  function bayanSpeaking(){
    const t = "Now let's talk about sports and exercises. " +
              "What sports do you like playing? " +
              "Do you like running or swimming? " +
              "Who do you play sports with?";
    speakBayanText(t);
  }

  function startSpeak(){
    if(!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
      alert("Speech recognition is not supported in this browser.");
      return;
    }
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SR();
    recognition.lang = "en-US";
    recognition.onresult = function(event){
      const speech = event.results[0][0].transcript.toLowerCase();
      let starsHere = 0;
      if(speech.includes("football") || speech.includes("volleyball") ||
         speech.includes("basketball") || speech.includes("swim") ||
         speech.includes("run") || speech.includes("tennis")){
        addStar();
        starsHere++;
      }
      const box = document.getElementById('speakStars');
      if(starsHere > 0){
        box.innerHTML = "‚≠ê +" + starsHere + " speaking star!<br>You said: " + speech;
      } else {
        box.innerHTML = "You said: " + speech + "<br>Try to use sport words: football, volleyball, tennis, swim...";
      }
    };
    recognition.start();
  }

  function stopSpeak(){
    if(recognition) recognition.stop();
  }

  // ---------- WRITING: TRANSLATION ----------
  function checkWritingTranslate(){
    let starsHere = 0;
    const a1 = document.getElementById('w1').value.toLowerCase();
    const a2 = document.getElementById('w2').value.toLowerCase();
    const a3 = document.getElementById('w3').value.toLowerCase();

    if(!scored.w1 && a1.includes("they are") && a1.includes("playing") && a1.includes("volleyball")){
      scored.w1 = true; addStar(); starsHere++;
    }
    if(!scored.w2 && a2.includes("my brother") && a2.includes("likes") &&
       a2.includes("swimming") && a2.includes("running")){
      scored.w2 = true; addStar(); starsHere++;
    }
    if(!scored.w3 && a3.includes("this is") && (a3.includes("our racket") || a3.includes("our racquet")) &&
       (a3.includes("it is ours") || a3.includes("it's ours"))){
      scored.w3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('writeTransStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " translation stars!";
    } else {
      box.innerHTML = "No new stars. Check your sentences or you already got them.";
    }
  }

  // ---------- WRITING: DICTATION ----------
  function bayanWords(){
    const t = "football, volleyball, basketball, tennis, swimming, running, table tennis.";
    speakBayanText(t);
  }

  function bayanDictation(){
    const t = "We like playing football and volleyball at school. " +
              "On Saturdays, we go running in the park and sometimes we go swimming. " +
              "Sports are fun and they are good for our health.";
    speakBayanText(t);
  }

  function checkDictation(){
    const text = document.getElementById("writeBox").value.toLowerCase();
    const keywords = ["football","volleyball","running","swimming","school","park","health"];
    let found = 0;
    for(const w of keywords){
      if(text.includes(w)) found++;
    }
    let punctuationOk = (text.split(".").length - 1) >= 2;

    let starsHere = 0;
    if(!scored.dict && found >= 5 && punctuationOk){
      scored.dict = true;
      addStar();
      starsHere++;
    }

    const box = document.getElementById('dictStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " dictation star!";
    } else if(found >= 4){
      box.innerHTML = "Good, but check words and punctuation.";
    } else {
      box.innerHTML = "Listen again and try to write all key words with dots.";
    }
  }

  // ---------- FINISH + NAVIGATION ----------
  function finishLesson(){
    document.getElementById("finalStars").innerText = totalStars;
    let msg = "";
    if(totalStars >= 20){
      msg = "üåüüåüüåü Amazing! Super sport star!";
    } else if(totalStars >= 12){
      msg = "üåüüåü Great job! Very active!";
    } else if(totalStars >= 6){
      msg = "üåü Good start! Keep practicing!";
    } else {
      msg = "Keep going! Every star is progress!";
    }
    document.getElementById("finalMessage").innerText = msg;

    const studentName = localStorage.getItem("studentName") || "Unknown Student";
    const allResults = JSON.parse(localStorage.getItem("teacherJournal") || "{}");
    allResults[studentName] = allResults[studentName] || {};
    allResults[studentName]["Lesson 2"] = totalStars;
    localStorage.setItem("teacherJournal", JSON.stringify(allResults));
    localStorage.setItem("lesson2Stars", totalStars);

    alert("Lesson 2 saved! " + studentName + " got " + totalStars + "‚≠ê.");
  }

  function goBack(){ window.location.href = "index.html"; }
  function goMenu(){ window.location.href = "index.html"; }
  function goNext(){ window.location.href = "theme3.html"; }

  // init
  updateStarsText();
</script>
  <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
  <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
  <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
  <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
</body>
</html>






