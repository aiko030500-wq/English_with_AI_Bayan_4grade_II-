<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme 3 ‚Äî Sports Around the World</title>
  <style>
    body {
      font-family: Verdana, sans-serif;
      background: linear-gradient(180deg,#e7f4ff 0%,#c9e0ff 100%);
      margin: 0;
      color: #002b5c;
      text-align: center;
    }
    header {
      background: linear-gradient(90deg,#003366,#0055aa);
      color: white;
      padding: 0.6rem 1rem;
      border-bottom: 5px solid #7ad0ff;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      width: 55px; height: 55px;
      border-radius: 50%;
      border: 3px solid #7ad0ff;
      object-fit: cover;
      background: white;
    }
    h2 {color:#003366;}
    section {
      background: white;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 15px;
      max-width: 800px;
      margin: 15px auto;
      text-align: left;
      line-height: 1.5;
      font-size: 0.95rem;
    }
    h3 {
      background: #003366;
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 1rem;
    }
    .btn {
      display:inline-block;
      margin:6px;
      padding:8px 14px;
      border:none;
      border-radius:10px;
      background:#003366;
      color:white;
      font-weight:bold;
      cursor:pointer;
      font-size:0.9rem;
    }
    .btn:hover {background:#7ad0ff; color:#003366;}
    textarea {
      width:100%;
      border-radius:10px;
      border:1px solid #ccc;
      padding:6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    input[type="text"] {
      width:100%;
      max-width:380px;
      border-radius:8px;
      border:1px solid #ccc;
      padding:4px 6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    select {
      border-radius:8px;
      padding:2px 4px;
      font-size:0.9rem;
    }
  </style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:10px;">
    <img src="logo.png" class="logo" alt="AI Bayan logo">
    <div>
      <h1 style="margin:0;font-size:1rem;">Theme 3 ‚Äî Sports Around the World</h1>
      <p style="margin:0;color:#d9f4ff;">English with AI Bayan</p>
    </div>
  </div>
</header>

<main>
  <h2>üåç Sports Around the World</h2>
  <p style="font-style:italic;">Ice hockey, table tennis, ice skating and more</p>
  <p id="lessonStarsLine"><b>You have 0 ‚≠ê in this lesson.</b></p>

  <!-- ========== VOCABULARY (sports & equipment) ========== -->
  <section>
    <h3>üß† VOCABULARY ‚Äî Sports and equipment</h3>

    <p><b>AI Bayan –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –†–µ–±—ë–Ω–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π.</b></p>

    <!-- Q1 -->
    <p>1) AI Bayan:
      <button class="btn" onclick="speakVocab('Alex plays ice hockey in Canada.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v1" value="1"> –ê–ª–µ–∫—Å –∏–≥—Ä–∞–µ—Ç –≤ —Ö–æ–∫–∫–µ–π —Å —à–∞–π–±–æ–π –≤ –ö–∞–Ω–∞–¥–µ.</label><br>
    <label><input type="radio" name="v1" value="0"> –ê–ª–µ–∫—Å –∏–≥—Ä–∞–µ—Ç –≤ —Ç–µ–Ω–Ω–∏—Å –≤ –ö–∞–Ω–∞–¥–µ.</label><br>
    <label><input type="radio" name="v1" value="0"> –ê–ª–µ–∫—Å –∏–≥—Ä–∞–µ—Ç –≤ —Ñ—É—Ç–±–æ–ª –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ.</label><br>

    <!-- Q2 -->
    <p>2) AI Bayan:
      <button class="btn" onclick="speakVocab('Lee plays table tennis with his friends.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v2" value="0"> –õ–∏ –∫–∞—Ç–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—å–∫–∞—Ö —Å–æ —Å–≤–æ–∏–º–∏ –¥—Ä—É–∑—å—è–º–∏.</label><br>
    <label><input type="radio" name="v2" value="1"> –õ–∏ –∏–≥—Ä–∞–µ—Ç –≤ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å —Å–æ —Å–≤–æ–∏–º–∏ –¥—Ä—É–∑—å—è–º–∏.</label><br>
    <label><input type="radio" name="v2" value="0"> –õ–∏ –±–µ–≥–∞–µ—Ç —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ —É—Ç—Ä–∞–º.</label><br>

    <!-- Q3 -->
    <p>3) AI Bayan:
      <button class="btn" onclick="speakVocab('Oraz goes ice skating at Medeu Ice Rink.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v3" value="0"> –û—Ä–∞–∑ –∏–≥—Ä–∞–µ—Ç –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª –Ω–∞ –ú–µ–¥–µ—É.</label><br>
    <label><input type="radio" name="v3" value="1"> –û—Ä–∞–∑ –∫–∞—Ç–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—å–∫–∞—Ö –Ω–∞ –∫–∞—Ç–∫–µ –ú–µ–¥–µ—É.</label><br>
    <label><input type="radio" name="v3" value="0"> –û—Ä–∞–∑ –ø–ª–∞–≤–∞–µ—Ç –≤ –±–∞—Å—Å–µ–π–Ω–µ –ú–µ–¥–µ—É.</label><br>

    <!-- Q4 -->
    <p>4) AI Bayan:
      <button class="btn" onclick="speakVocab('They play basketball at the weekend.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v4" value="1"> –û–Ω–∏ –∏–≥—Ä–∞—é—Ç –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º.</label><br>
    <label><input type="radio" name="v4" value="0"> –û–Ω–∏ –ø–ª–∞–≤–∞—é—Ç –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º.</label><br>
    <label><input type="radio" name="v4" value="0"> –û–Ω–∏ –±–µ–≥–∞—é—Ç –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º.</label><br>

    <!-- Q5 -->
    <p>5) AI Bayan:
      <button class="btn" onclick="speakVocab('Ice hockey players wear helmets and gloves.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v5" value="1"> –ò–≥—Ä–æ–∫–∏ –≤ —Ö–æ–∫–∫–µ–π –Ω–æ—Å—è—Ç —à–ª–µ–º—ã –∏ –ø–µ—Ä—á–∞—Ç–∫–∏.</label><br>
    <label><input type="radio" name="v5" value="0"> –ò–≥—Ä–æ–∫–∏ –≤ —Ö–æ–∫–∫–µ–π –Ω–æ—Å—è—Ç –∫–µ–ø–∫–∏ –∏ –æ—á–∫–∏.</label><br>
    <label><input type="radio" name="v5" value="0"> –ò–≥—Ä–æ–∫–∏ –≤ —Ö–æ–∫–∫–µ–π –Ω–æ—Å—è—Ç –ø–ª–∞–≤–∫–∏ –∏ –æ—á–∫–∏.</label><br>

    <!-- Q6 -->
    <p>6) AI Bayan:
      <button class="btn" onclick="speakVocab('She has a gold medal from the race.')">‚ñ∂ Play</button>
      <button class="btn" onclick="stopBayan()">‚èπ Stop</button>
    </p>
    <p>Choose the correct translation:</p>
    <label><input type="radio" name="v6" value="0"> –£ –Ω–µ—ë –µ—Å—Ç—å –∑–æ–ª–æ—Ç–æ–π –º—è—á —Å —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π.</label><br>
    <label><input type="radio" name="v6" value="1"> –£ –Ω–µ—ë –µ—Å—Ç—å –∑–æ–ª–æ—Ç–∞—è –º–µ–¥–∞–ª—å —Å –∑–∞–±–µ–≥–∞.</label><br>
    <label><input type="radio" name="v6" value="0"> –£ –Ω–µ—ë –µ—Å—Ç—å —Å–µ—Ä–µ–±—Ä—è–Ω—ã–π —à–ª–µ–º —Å –∑–∞–±–µ–≥–∞.</label><br>

    <button class="btn" onclick="checkVocab()">Check ‚úÖ</button>
    <div id="vocabStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== GRAMMAR (Present Simple, negatives, Let's, enjoy) ========== -->
  <section>
    <h3>üìò GRAMMAR ‚Äî Present Simple & Let‚Äôs</h3>

    <p><b>1. Present Simple (habits):</b></p>
    <p>
      We use <b>Present Simple</b> to talk about habits and things we do regularly.<br>
      I play table tennis. / He plays ice hockey. / They don‚Äôt go ice skating.
    </p>

    <p><b>Choose the correct form:</b></p>

    <p>1) I ___ play basketball every day.</p>
    <label><input type="radio" name="q1" value="dont"> don‚Äôt</label><br>
    <label><input type="radio" name="q1" value="doesnt"> doesn‚Äôt</label><br>

    <p>2) He ___ play table tennis on Mondays.</p>
    <label><input type="radio" name="q2" value="dont"> don‚Äôt</label><br>
    <label><input type="radio" name="q2" value="doesnt"> doesn‚Äôt</label><br>

    <p>3) They ___ like playing ice hockey.</p>
    <label><input type="radio" name="q3" value="dont"> don‚Äôt</label><br>
    <label><input type="radio" name="q3" value="doesnt"> doesn‚Äôt</label><br>

    <hr>

    <p><b>2. Let‚Äôs + verb (suggestions):</b></p>
    <p>We say <b>Let‚Äôs + verb</b> to make a suggestion.</p>
    <p>4) ‚Äú___ go ice skating at the weekend!‚Äù</p>
    <label><input type="radio" name="q4" value="lets"> Let‚Äôs</label><br>
    <label><input type="radio" name="q4" value="we"> We</label><br>

    <hr>

    <p><b>3. enjoy / don‚Äôt like + verb-ing:</b></p>
    <p>5) ‚ÄúI ___ playing table tennis with my friends.‚Äù</p>
    <label><input type="radio" name="q5" value="enjoy"> enjoy</label><br>
    <label><input type="radio" name="q5" value="dont like"> don‚Äôt like</label><br>

    <button class="btn" onclick="checkGrammar()">Check ‚úÖ</button>
    <div id="grammarStars" style="font-size:1.1rem;margin-top:8px;"></div>

    <p><b>4. Write your own sentence:</b> (practice)</p>
    <p>Example: I don‚Äôt play ice hockey, but I enjoy playing basketball.</p>
    <input id="writeGrammar" type="text" placeholder="Type your sentence here...">
  </section>

  <!-- ========== LISTENING (Alex, Jim, Oraz, Lee) ========== -->
  <section>
    <h3>üéß LISTENING ‚Äî Friends around the world</h3>

    <p><b>1. Listen to AI Bayan:</b></p>
    <button class="btn" onclick="bayanListening()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:8px;font-size:0.9rem;color:#444;">
      (Teacher note: –ø–æ –º–æ—Ç–∏–≤–∞–º SB ‚Äî Alex, Jim, Oraz, Lee –∏ –∏—Ö –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞.)
    </p>

    <p><b>2. True or False?</b></p>

    <p>1) Alex plays ice hockey.</p>
    <select id="t1">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <p>2) Lee plays ice hockey.</p>
    <select id="t2">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <p>3) Oraz goes ice skating at the weekend.</p>
    <select id="t3">
      <option>‚Äî</option><option>True</option><option>False</option>
    </select>

    <button class="btn" onclick="checkListening()">Check ‚úÖ</button>
    <div id="listenStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== READING (short text about sports around the world) ========== -->
  <section>
    <h3>üìñ READING ‚Äî Sports in different countries</h3>

    <p><b>1. Read or listen:</b></p>
    <button class="btn" onclick="bayanReading()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <div style="margin-top:10px; background:#e9fff4; border-radius:10px; padding:10px;">
      <p>
        People around the world love different sports.  
        In Canada, many children play ice hockey and go ice skating.  
        In Kazakhstan, children like going to Medeu Ice Rink and playing basketball at school.  
        In some countries, children enjoy playing table tennis and football after school.  
        Sports help us make friends and stay healthy.
      </p>
    </div>

    <p><b>2. Answer the questions:</b></p>
    <ol>
      <li>What sport do many children play in Canada?<br>
        <input id="r1" type="text" placeholder="Your answer..."></li><br>
      <li>What do children in Kazakhstan like doing?<br>
        <input id="r2" type="text" placeholder="Your answer..."></li><br>
      <li>Why are sports good for us?<br>
        <input id="r3" type="text" placeholder="Your answer..."></li>
    </ol>

    <button class="btn" onclick="checkReading()">Check ‚úÖ</button>
    <div id="readStars" style="font-size:1.1rem;margin-top:8px;"></div>
  </section>

  <!-- ========== SPEAKING ========== -->
  <section>
    <h3>üó£Ô∏è SPEAKING ‚Äî Talk about sports around the world</h3>

    <p><b>1. Listen to questions:</b></p>
    <button class="btn" onclick="bayanSpeaking()">‚ñ∂ Play</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:8px;"><b>Questions:</b></p>
    <ul>
      <li>What sports do you like playing?</li>
      <li>Do you know any sports from other countries?</li>
      <li>Would you like to go ice skating at Medeu?</li>
    </ul>

    <p><b>2. Answer into the microphone:</b></p>
    <button class="btn" onclick="startSpeak()">üéô Start recording</button>
    <button class="btn" onclick="stopSpeak()">‚èπ Stop</button>

    <div id="speakStars" style="font-size:1.1rem;margin-top:10px;"></div>
  </section>

  <!-- ========== WRITING (–ø–µ—Ä–µ–≤–æ–¥ + –¥–∏–∫—Ç–∞–Ω—Ç) ========== -->
  <section>
    <h3>‚úçÔ∏è WRITING ‚Äî Translation & Dictation</h3>

    <p><b>A. Translate into English:</b></p>
    <p>1) –Ø –Ω–µ –∏–≥—Ä–∞—é –≤ —Ö–æ–∫–∫–µ–π —Å —à–∞–π–±–æ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</p>
    <textarea id="w1" rows="2" placeholder="Your translation..."></textarea>

    <p>2) –û–Ω –Ω–µ –∏–≥—Ä–∞–µ—Ç –≤ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º.</p>
    <textarea id="w2" rows="2" placeholder="Your translation..."></textarea>

    <p>3) –î–∞–≤–∞–π –ø–æ–π–¥—ë–º –∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—å–∫–∞—Ö –≤ —ç—Ç–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ!</p>
    <textarea id="w3" rows="2" placeholder="Your translation..."></textarea>

    <button class="btn" onclick="checkWritingTranslate()">Check translation ‚úÖ</button>
    <div id="writeTransStars" style="font-size:1.1rem;margin-top:6px;"></div>

    <hr>

    <p><b>B. Dictation by AI Bayan:</b></p>
    <p>Listen and write the text. Pay attention to punctuation.</p>
    <button class="btn" onclick="bayanWords()">‚ñ∂ Words</button>
    <button class="btn" onclick="bayanDictation()">‚ñ∂ Text</button>
    <button class="btn" onclick="stopBayan()">‚èπ Stop</button>

    <p style="margin-top:6px;font-size:0.85rem;color:#444;">
      (Short dictation about sports around the world.)
    </p>

    <textarea id="writeBox" rows="5" placeholder="Write the text here..."></textarea><br>
    <button class="btn" onclick="checkDictation()">Check dictation ‚úÖ</button>
    <div id="dictStars" style="font-size:1.1rem;margin-top:6px;"></div>
  </section>

  <!-- ========== LESSON RESULT ========== -->
  <section style="text-align:center;margin-top:25px;">
    <h3>üéØ Lesson Complete!</h3>
    <p>You have earned <b><span id="finalStars">0</span> ‚≠ê</b> in this lesson.</p>

    <button class="btn" onclick="finishLesson()">Save & Show Result ‚úÖ</button>

    <div id="finalMessage" style="margin-top:10px;font-size:1.1rem;color:#003366;"></div>

    <div style="margin-top:18px;">
      <button class="btn" onclick="goBack()">‚¨Ö Back</button>
      <button class="btn" onclick="goMenu()">üè† Main Menu</button>
      <button class="btn" onclick="goNext()">Next ‚û°Ô∏è</button>
    </div>
  </section>

  <p style="font-size:0.8rem;color:#444;margin-top:10px;text-align:center;">
    Created by Bayan team
  </p>
</main>

<script>
  // –û–ë–©–ò–ô –°–ß–Å–¢ –ó–í–Å–ó–î (–±–µ–∑ –ª–∏–º–∏—Ç–∞)
  let totalStars = 0;
  function addStar() {
    totalStars++;
    updateStarsText();
  }
  function updateStarsText(){
    document.getElementById('lessonStarsLine').innerText =
      "You have " + totalStars + " ‚≠ê in this lesson.";
    const fs = document.getElementById('finalStars');
    if(fs) fs.innerText = totalStars;
  }

  // –§–ª–∞–≥–∏ ‚Äî —á—Ç–æ–±—ã –∑–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ—Ç–≤–µ—Ç –Ω–µ –Ω–∞—á–∏—Å–ª—è—Ç—å –∑–≤–µ–∑–¥—É –ø–æ–≤—Ç–æ—Ä–Ω–æ
  const scored = {
    v1:false, v2:false, v3:false, v4:false, v5:false, v6:false,
    g1:false, g2:false, g3:false, g4:false, g5:false,
    l1:false, l2:false, l3:false,
    r1:false, r2:false, r3:false,
    w1:false, w2:false, w3:false,
    dict:false
  };

  // ---------- TTS (AI Bayan voice) ----------
  function speakBayanText(text){
    if(!('speechSynthesis' in window)){
      alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–∑–≤—É—á–∫—É üòî");
      return;
    }
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    utter.rate = 0.9;
    utter.pitch = 1.05;
    utter.volume = 1;
    const voices = speechSynthesis.getVoices();
    const femaleEn = voices.find(v => v.lang.includes("en") && v.name.toLowerCase().includes("female"));
    if(femaleEn) utter.voice = femaleEn;
    speechSynthesis.speak(utter);
  }

  function stopBayan(){
    window.speechSynthesis.cancel();
  }

  // ---------- VOCABULARY ----------
  function speakVocab(text){
    speakBayanText(text);
  }

  function checkVocab(){
    let starsHere = 0;

    const q1 = document.querySelector('input[name="v1"]:checked');
    if(q1 && q1.value === "1" && !scored.v1){ scored.v1=true; addStar(); starsHere++; }
    const q2 = document.querySelector('input[name="v2"]:checked');
    if(q2 && q2.value === "1" && !scored.v2){ scored.v2=true; addStar(); starsHere++; }
    const q3 = document.querySelector('input[name="v3"]:checked');
    if(q3 && q3.value === "1" && !scored.v3){ scored.v3=true; addStar(); starsHere++; }
    const q4 = document.querySelector('input[name="v4"]:checked');
    if(q4 && q4.value === "1" && !scored.v4){ scored.v4=true; addStar(); starsHere++; }
    const q5 = document.querySelector('input[name="v5"]:checked');
    if(q5 && q5.value === "1" && !scored.v5){ scored.v5=true; addStar(); starsHere++; }
    const q6 = document.querySelector('input[name="v6"]:checked');
    if(q6 && q6.value === "1" && !scored.v6){ scored.v6=true; addStar(); starsHere++; }

    const box = document.getElementById('vocabStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " vocabulary stars!";
    } else {
      box.innerHTML = "No new stars. Check answers or you already got them.";
    }
  }

  // ---------- GRAMMAR ----------
  function checkGrammar(){
    let starsHere = 0;

    const q1 = document.querySelector('input[name="q1"]:checked');
    if(q1 && q1.value === "dont" && !scored.g1){ scored.g1=true; addStar(); starsHere++; }

    const q2 = document.querySelector('input[name="q2"]:checked');
    if(q2 && q2.value === "doesnt" && !scored.g2){ scored.g2=true; addStar(); starsHere++; }

    const q3 = document.querySelector('input[name="q3"]:checked');
    if(q3 && q3.value === "dont" && !scored.g3){ scored.g3=true; addStar(); starsHere++; }

    const q4 = document.querySelector('input[name="q4"]:checked');
    if(q4 && q4.value === "lets" && !scored.g4){ scored.g4=true; addStar(); starsHere++; }

    const q5 = document.querySelector('input[name="q5"]:checked');
    if(q5 && q5.value === "enjoy" && !scored.g5){ scored.g5=true; addStar(); starsHere++; }

    const box = document.getElementById('grammarStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " grammar stars!";
    } else {
      box.innerHTML = "No new stars. Check again or you already got them.";
    }
  }

  // ---------- LISTENING ----------
  function bayanListening(){
    const t = "Hello, I am Alex. I play ice hockey in Canada. " +
              "My friend Jim plays ice hockey too. We wear helmets, gloves and ice skates. " +
              "Lee plays table tennis with his friends. " +
              "Oraz goes ice skating at the weekend at Medeu Ice Rink in Kazakhstan.";
    speakBayanText(t);
  }

  function checkListening(){
    let starsHere = 0;

    if(document.getElementById('t1').value === 'True' && !scored.l1){
      scored.l1 = true; addStar(); starsHere++;
    }
    if(document.getElementById('t2').value === 'False' && !scored.l2){
      scored.l2 = true; addStar(); starsHere++;
    }
    if(document.getElementById('t3').value === 'True' && !scored.l3){
      scored.l3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('listenStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " listening stars!";
    } else {
      box.innerHTML = "No new stars. Check your answers.";
    }
  }

  // ---------- READING ----------
  function bayanReading(){
    const t =
      "People around the world love different sports. " +
      "In Canada, many children play ice hockey and go ice skating. " +
      "In Kazakhstan, children like going to Medeu Ice Rink and playing basketball at school. " +
      "In some countries, children enjoy playing table tennis and football after school. " +
      "Sports help us make friends and stay healthy.";
    speakBayanText(t);
  }

  function checkReading(){
    let starsHere = 0;
    const a1 = document.getElementById('r1').value.toLowerCase();
    const a2 = document.getElementById('r2').value.toLowerCase();
    const a3 = document.getElementById('r3').value.toLowerCase();

    if(!scored.r1 && (a1.includes("ice hockey") || a1.includes("hockey"))){
      scored.r1 = true; addStar(); starsHere++;
    }
    if(!scored.r2 && (a2.includes("medeu") || a2.includes("ice rink") || a2.includes("basketball"))){
      scored.r2 = true; addStar(); starsHere++;
    }
    if(!scored.r3 && (a3.includes("friends") || a3.includes("healthy") || a3.includes("health"))){
      scored.r3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('readStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " reading stars!";
    } else {
      box.innerHTML = "No new stars. Check answers or you already got them.";
    }
  }

  // ---------- SPEAKING ----------
  let recognition;
  function bayanSpeaking(){
    const t = "Now let's talk about sports around the world. " +
              "What sports do you like playing? " +
              "Do you know any sports from other countries? " +
              "Would you like to go ice skating at Medeu?";
    speakBayanText(t);
  }

  function startSpeak(){
    if(!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
      alert("Speech recognition is not supported in this browser.");
      return;
    }
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SR();
    recognition.lang = "en-US";
    recognition.onresult = function(event){
      const speech = event.results[0][0].transcript.toLowerCase();
      let starsHere = 0;
      if(
        speech.includes("football") || speech.includes("volleyball") ||
        speech.includes("basketball") || speech.includes("ice hockey") ||
        speech.includes("hockey") || speech.includes("table tennis") ||
        speech.includes("ice skating") || speech.includes("medeu") ||
        speech.includes("canada") || speech.includes("kazakhstan")
      ){
        addStar();
        starsHere++;
      }
      const box = document.getElementById('speakStars');
      if(starsHere > 0){
        box.innerHTML = "‚≠ê +" + starsHere + " speaking star!<br>You said: " + speech;
      } else {
        box.innerHTML = "You said: " + speech + "<br>Try to use words like: ice hockey, table tennis, ice skating, Medeu...";
      }
    };
    recognition.start();
  }

  function stopSpeak(){
    if(recognition) recognition.stop();
  }

  // ---------- WRITING: TRANSLATION ----------
  function checkWritingTranslate(){
    let starsHere = 0;
    const a1 = document.getElementById('w1').value.toLowerCase();
    const a2 = document.getElementById('w2').value.toLowerCase();
    const a3 = document.getElementById('w3').value.toLowerCase();

    if(!scored.w1 && a1.includes("i") && a1.includes("don't") && a1.includes("play") &&
       (a1.includes("ice hockey") || a1.includes("hockey")) && a1.includes("every day")){
      scored.w1 = true; addStar(); starsHere++;
    }
    if(!scored.w2 && (a2.includes("he") || a2.includes("he does not") || a2.includes("he doesn't")) &&
       a2.includes("doesn't") && a2.includes("play") &&
       (a2.includes("table tennis") || a2.includes("table-tennis")) &&
       a2.includes("on mondays")){
      scored.w2 = true; addStar(); starsHere++;
    }
    if(!scored.w3 && (a3.includes("let's") || a3.includes("lets")) &&
       (a3.includes("go") && (a3.includes("ice skating") || a3.includes("skating"))) &&
       (a3.includes("this weekend") || a3.includes("at the weekend"))){
      scored.w3 = true; addStar(); starsHere++;
    }

    const box = document.getElementById('writeTransStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " translation stars!";
    } else {
      box.innerHTML = "No new stars. Check your sentences or you already got them.";
    }
  }

  // ---------- WRITING: DICTATION ----------
  function bayanWords(){
    const t = "ice hockey, table tennis, ice skating, basketball, medal, helmet, gloves.";
    speakBayanText(t);
  }

  function bayanDictation(){
    const t = "Around the world, children play many sports. " +
              "Some children play ice hockey and wear helmets and gloves. " +
              "Others enjoy playing table tennis, basketball and football. " +
              "Sports are fun and they help us stay healthy.";
    speakBayanText(t);
  }

  function checkDictation(){
    const text = document.getElementById("writeBox").value.toLowerCase();
    const keywords = ["ice hockey","table tennis","basketball","helmet","gloves","healthy","sports"];
    let found = 0;
    for(const w of keywords){
      if(text.includes(w)) found++;
    }
    let punctuationOk = (text.split(".").length - 1) >= 2;

    let starsHere = 0;
    if(!scored.dict && found >= 5 && punctuationOk){
      scored.dict = true;
      addStar();
      starsHere++;
    }

    const box = document.getElementById('dictStars');
    if(starsHere > 0){
      box.innerHTML = "‚≠ê +" + starsHere + " dictation star!";
    } else if(found >= 4){
      box.innerHTML = "Good, but check words and punctuation.";
    } else {
      box.innerHTML = "Listen again and try to write all key words with dots.";
    }
  }

  // ---------- FINISH + NAVIGATION ----------
  function finishLesson(){
    document.getElementById("finalStars").innerText = totalStars;
    let msg = "";
    if(totalStars >= 20){
      msg = "üåüüåüüåü Amazing! World sport star!";
    } else if(totalStars >= 12){
      msg = "üåüüåü Great job! Very active!";
    } else if(totalStars >= 6){
      msg = "üåü Good start! Keep practicing!";
    } else {
      msg = "Keep going! Every star is progress!";
    }
    document.getElementById("finalMessage").innerText = msg;

    const studentName = localStorage.getItem("studentName") || "Unknown Student";
    const allResults = JSON.parse(localStorage.getItem("teacherJournal") || "{}");
    allResults[studentName] = allResults[studentName] || {};
    allResults[studentName]["Lesson 3"] = totalStars;
    localStorage.setItem("teacherJournal", JSON.stringify(allResults));
    localStorage.setItem("lesson3Stars", totalStars);

    alert("Lesson 3 saved! " + studentName + " got " + totalStars + "‚≠ê.");
  }

  function goBack(){ window.location.href = "index.html"; }
  function goMenu(){ window.location.href = "index.html"; }
  function goNext(){ window.location.href = "theme4.html"; }

  // init
  updateStarsText();
</script>
  <!-- === Animation & Voice System === -->
<script>
// ====== ‚úÖ CORRECT / ‚ùå WRONG ANIMATION ======
function showResultAnimation(isCorrect, elementId){
  const el=document.getElementById(elementId);
  if(isCorrect){
    el.innerHTML="‚úÖ Correct! ‚≠ê";
    el.style.background="rgba(144,238,144,0.6)";
    el.style.border="2px solid green";
    el.style.transition="0.4s";
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  } else {
    el.innerHTML="‚ùå Try again!";
    el.style.background="rgba(255,182,193,0.6)";
    el.style.border="2px solid red";
    el.style.transition="0.4s";
    navigator.vibrate?.(250);
    setTimeout(()=>{ el.style.background=""; el.style.border=""; el.innerHTML=""; },1500);
  }
}

// ====== üó£Ô∏è AI Bayan Adaptive Voice ======
function bayanSpeak(text){
  const voices=speechSynthesis.getVoices();
  let voice=voices.find(v=>v.lang.includes("en-GB")||v.name.includes("Google UK English Female"));
  if(!voice){ voice=voices[0]; }
  const utter=new SpeechSynthesisUtterance(text);
  utter.voice=voice;
  utter.lang="en-GB";
  utter.rate=0.88;
  utter.pitch=1.0;
  speechSynthesis.speak(utter);
}
</script>
</body>
</html>


